<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-sdks/analytics-sdks/ios/ios-user-guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">User Guide | Rakuten Analytics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rakutenanalytics.github.io/rakuten-analytics-public-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://rakutenanalytics.github.io/rakuten-analytics-public-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://rakutenanalytics.github.io/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="algolia-site-verification" content="BC995083B3CF2E30"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="User Guide | Rakuten Analytics"><meta data-rh="true" name="description" content="iOS Analytics User Guide"><meta data-rh="true" property="og:description" content="iOS Analytics User Guide"><link data-rh="true" rel="icon" href="/rakuten-analytics-public-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rakutenanalytics.github.io/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide"><link data-rh="true" rel="alternate" href="https://rakutenanalytics.github.io/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://rakutenanalytics.github.io/rakuten-analytics-public-docs/ja/docs/analytics-sdk/ios/ios-user-guide" hreflang="ja"><link data-rh="true" rel="alternate" href="https://rakutenanalytics.github.io/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://56KYHD3I32-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Rakuten Analytics" href="/rakuten-analytics-public-docs/opensearch.xml">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-81FVRG5RZZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-81FVRG5RZZ",{})</script><link rel="stylesheet" href="/rakuten-analytics-public-docs/assets/css/styles.76b20772.css">
<script src="/rakuten-analytics-public-docs/assets/js/runtime~main.5952a3b5.js" defer="defer"></script>
<script src="/rakuten-analytics-public-docs/assets/js/main.1d3f7934.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rakuten-analytics-public-docs/"><div class="navbar__logo"><img src="/rakuten-analytics-public-docs/img/rakuten-analytics-logo.svg" alt="Rakuten Logo" class="themedComponent__dKv themedComponent--light_rzkv" height="25" width="175"><img src="/rakuten-analytics-public-docs/img/rakuten-analytics-logo.svg" alt="Rakuten Logo" class="themedComponent__dKv themedComponent--dark_mMAk" height="25" width="175"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rakuten-analytics-public-docs/docs/overview">Products</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/rakuten-analytics-public-docs/ja/docs/analytics-sdk/ios/ios-user-guide" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rakuten-analytics-public-docs/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rakuten-analytics-public-docs/docs/analytics-sdks">Analytics SDKs</a><button aria-label="Collapse sidebar category &#x27;Analytics SDKs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rakuten-analytics-public-docs/docs/analytics-sdks/android">Android</a><button aria-label="Expand sidebar category &#x27;Android&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rakuten-analytics-public-docs/docs/analytics-sdks/ios">iOS</a><button aria-label="Collapse sidebar category &#x27;iOS&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide">User Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rakuten-analytics-public-docs/docs/category/advanced-usage-3">Advanced Usage</a><button aria-label="Expand sidebar category &#x27;Advanced Usage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-faq">Frequently Asked Questions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-changelog">Changelog</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rakuten-analytics-public-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rakuten-analytics-public-docs/docs/analytics-sdks"><span itemprop="name">Analytics SDKs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rakuten-analytics-public-docs/docs/analytics-sdks/ios"><span itemprop="name">iOS</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">User Guide</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>User Guide</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ios-analytics-user-guide">iOS Analytics User Guide<a href="#ios-analytics-user-guide" class="hash-link" aria-label="Direct link to iOS Analytics User Guide" title="Direct link to iOS Analytics User Guide">​</a></h2>
<p>The <strong>analytics</strong> module provides APIs for tracking events and automatically sends a subset of lifecycle events to the Rakuten Analytics Tracker (RAT) service.</p>
<p>For more detailed information, please refer to the <a href="/rakuten-analytics-public-docs/docs/category/advanced-usage-1">Advanced Usage</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<p>This module supports iOS 12.0 and above. It has been tested with iOS 12.5 and above. Our minimum supported version is updated annually based on the OS version usage.</p>
<p>Xcode &gt;= 14.1 is supported.
Swift &gt;= 5.7.1 is supported.</p>
<p>Note: The SDK may build on earlier Xcode versions but it is not officially supported or tested.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-install">How to install<a href="#how-to-install" class="hash-link" aria-label="Direct link to How to install" title="Direct link to How to install">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cocoapods">CocoaPods<a href="#cocoapods" class="hash-link" aria-label="Direct link to CocoaPods" title="Direct link to CocoaPods">​</a></h3>
<p>To use the module in its default configuration your <code>Podfile</code> should contain:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pod &#x27;RakutenAnalytics&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run <code>pod install</code> to install the module and its dependencies.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="swift-package-manager">Swift Package Manager<a href="#swift-package-manager" class="hash-link" aria-label="Direct link to Swift Package Manager" title="Direct link to Swift Package Manager">​</a></h3>
<p>Open your project settings in Xcode and add a new package in &#x27;Swift Packages&#x27; tab:</p>
<ul>
<li>Repository URL: <code>https://github.com/rakutenanalytics/ios-rakutenanalytics.git</code></li>
<li>Version settings: 10.5.0 &quot;Up to Next Major&quot;</li>
</ul>
<p>Choose <code>RakutenAnalytics</code> product for your target. If you want to link other targets (Notification Service Extension, Notification Content Extension, etc), go to Build Phases of that target, then in Link Binary With Libraries click + button and add <code>RakutenAnalytics</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="importing-the-module-to-use-it-in-your-app">Importing the module to use it in your app<a href="#importing-the-module-to-use-it-in-your-app" class="hash-link" aria-label="Direct link to Importing the module to use it in your app" title="Direct link to Importing the module to use it in your app">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="swift">Swift<a href="#swift" class="hash-link" aria-label="Direct link to Swift" title="Direct link to Swift">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import RakutenAnalytics</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="objective-c">Objective-C<a href="#objective-c" class="hash-link" aria-label="Direct link to Objective-C" title="Direct link to Objective-C">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@import RakutenAnalytics;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-from-ranalytics-to-rakutenanalytics">Migration from RAnalytics to RakutenAnalytics<a href="#migration-from-ranalytics-to-rakutenanalytics" class="hash-link" aria-label="Direct link to Migration from RAnalytics to RakutenAnalytics" title="Direct link to Migration from RAnalytics to RakutenAnalytics">​</a></h3>
<p>At the moment there are no major API changes and diffrences between <code>RAnalytics</code> and <code>RakutenAnalytics</code>. The migration process relates only to reinstalling dependencies and updating imports.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cocoapods-1">CocoaPods<a href="#cocoapods-1" class="hash-link" aria-label="Direct link to CocoaPods" title="Direct link to CocoaPods">​</a></h4>
<p>To migrate from <code>RAnalytics</code> to <code>RakutenAnalytics</code> using CocoaPods, please, change <code>Podfile</code> the dependency from:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pod &#x27;RAnalytics&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pod &#x27;RakutenAnalytics&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And run <code>pod install</code> command to install dependency.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="swift-package-manager-1">Swift Package Manager<a href="#swift-package-manager-1" class="hash-link" aria-label="Direct link to Swift Package Manager" title="Direct link to Swift Package Manager">​</a></h4>
<p>To migrate from <code>RAnalytics</code> to <code>RakutenAnalytics</code> using Swift Package Manager, please, open your project settings in Xcode and remove <code>RAnalytics</code> dependency from Xcode Project. After that, please use this package url:</p>
<p><code>https://github.com/rakutenanalytics/ios-rakutenanalytics.git</code></p>
<p>instead of:</p>
<p><code>ssh://git@gitpub.rakuten-it.com:7999/eco/core-ios-analytics.git</code></p>
<p>To install <code>RakutenAnalytics</code> package dependency.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="module-imports">Module imports<a href="#module-imports" class="hash-link" aria-label="Direct link to Module imports" title="Direct link to Module imports">​</a></h4>
<p>After installing <code>RakutenAnalytics</code> instead of <code>RAnalytics</code> dependency, please, update module imports in the project from:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import RAnalytics</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import RakutenAnalytics</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring">Configuring<a href="#configuring" class="hash-link" aria-label="Direct link to Configuring" title="Direct link to Configuring">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="credentials">Credentials<a href="#credentials" class="hash-link" aria-label="Direct link to Credentials" title="Direct link to Credentials">​</a></h3>
<p>You must have a RAT account ID and application ID to track events using the Rakuten Analytics Tracker.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-time-configuration">Build-time Configuration<a href="#build-time-configuration" class="hash-link" aria-label="Direct link to Build-time Configuration" title="Direct link to Build-time Configuration">​</a></h3>
<p>Applications <strong>MUST</strong> configure <code>RATAccountIdentifier</code> in their <code>Info.plist</code> as follows:</p>
<table><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody><tr><td><code>RATAccountIdentifier</code></td><td><code>YOUR_RAT_ACCOUNT_ID</code> (Number type)</td></tr><tr><td><code>RATAppIdentifier</code></td><td><code>YOUR_RAT_APPLICATION_ID</code> (Number type)</td></tr></tbody></table>
<p><code>RATAppIdentifier</code> is an optional key. If not specified, it&#x27;s default value is set to <code>1</code>.</p>
<p>Otherwise:</p>
<ul>
<li>RakutenAnalytics SDK <strong>THROWS AN EXCEPTION</strong> in <strong>DEBUG MODE</strong> when <code>RATAccountIdentifier</code> key is missing in the app&#x27;s <code>Info.plist</code></li>
<li>RakutenAnalytics SDK tracking is <strong>DISABLED</strong> in <strong>RELEASE MODE</strong> when <code>RATAccountIdentifier</code> key is missing in the app&#x27;s <code>Info.plist</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-kibana-to-verify-successful-integration">Using Kibana to verify successful integration<a href="#using-kibana-to-verify-successful-integration" class="hash-link" aria-label="Direct link to Using Kibana to verify successful integration" title="Direct link to Using Kibana to verify successful integration">​</a></h3>
<p>Kibana STG and PROD sites can be used to check events sent by your app.</p>
<p>To find all analytics data for your app, you can search for your Application Identifier <code>aid:&lt;your app id&gt;</code> or <code>app_name:&lt;your bundle id&gt;</code>.</p>
<p>To find data for a certain event type, such as one of the <a href="/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide#standard-events">standard events</a>, you can add the <code>etype</code> to your search query, for example <code>aid:999 AND etype:_rem_launch</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-sdk">Using the SDK<a href="#using-the-sdk" class="hash-link" aria-label="Direct link to Using the SDK" title="Direct link to Using the SDK">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handle-login">Handle login<a href="#handle-login" class="hash-link" aria-label="Direct link to Handle login" title="Direct link to Handle login">​</a></h3>
<p>The member identifier needs to be set and unset manually in order to track login and logout events with the correct member identifier. In most cases, the value you set as member identifier should be the member&#x27;s identifier. The member identifier can be extracted from the IDSDK ID token or passed as <code>String</code> value.</p>
<p>You should notify the RakutenAnalytics SDK of the user&#x27;s member identifier using <code>setMemberIdentifier</code>.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">AnalyticsManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setMemberIdentifier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">member_identifier</span><span class="token operator" style="color:#393A34">%</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: By setting the member identifier, <code>_rem_login</code> is automatically tracked.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handle-login-failure">Handle login failure<a href="#handle-login-failure" class="hash-link" aria-label="Direct link to Handle login failure" title="Direct link to Handle login failure">​</a></h3>
<p>If user login fails, notify the RakutenAnalytics SDK using <code>setMemberError</code> as follows:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">AnalyticsManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setMemberError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: By setting a member error, <code>_rem_login_failure</code> is automatically tracked.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handle-logout">Handle logout<a href="#handle-logout" class="hash-link" aria-label="Direct link to Handle logout" title="Direct link to Handle logout">​</a></h3>
<p>When a user logs out, notify the RakutenAnalytics SDK using <code>removeMemberIdentifier</code> as follows:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">AnalyticsManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">removeMemberIdentifier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: By removing the member identifier, <code>_rem_logout</code> is automatically tracked.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="track-standard-event">Track standard event<a href="#track-standard-event" class="hash-link" aria-label="Direct link to Track standard event" title="Direct link to Track standard event">​</a></h3>
<p>Events are created with <code>RAnalyticsEvent#initWithName:parameters:</code> and spooled by calling their track method.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tracking-generic-events">Tracking generic events<a href="#tracking-generic-events" class="hash-link" aria-label="Direct link to Tracking generic events" title="Direct link to Tracking generic events">​</a></h4>
<p>Tracking a generic event relies on a tracker capable of processing the event currently being registered.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">AnalyticsManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Event</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;my.event&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;foo&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;bar&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tracking-rat-specific-events">Tracking RAT-specific events<a href="#tracking-rat-specific-events" class="hash-link" aria-label="Direct link to Tracking RAT-specific events" title="Direct link to Tracking RAT-specific events">​</a></h4>
<p>A concrete tracker, <code>RAnalyticsRATTracker</code>, is automatically registered and interacts with the <strong>Rakuten Analytics Tracker (RAT)</strong>. You can also use <code>RAnalyticsRATTracker#eventWithEventType:parameters:</code> for creating events that will only be processed by RAT.</p>
<blockquote>
<p><strong>Note:</strong> Our SDK automatically tracks a number of RAT parameters for you, so you don&#x27;t have to include those when creating an event: <code>acc</code>, <code>aid</code>, <code>etype</code>, <code>powerstatus</code>, <code>mbat</code>, <code>dln</code>, <code>loc</code>, <code>mcn</code>, <code>model</code>, <code>mnetw</code>, <code>mori</code>, <code>mos</code>, <code>online</code>, <code>cka</code>, <code>ckp</code>, <code>cks</code>, <code>ua</code>, <code>app_name</code>, <code>app_ver</code>, <code>res</code>, <code>ltm</code>, <code>ts1</code>, <code>tzo</code>, <code>userid</code> and <code>ver</code>.</p>
</blockquote>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">RAnalyticsRATTracker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">event</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">eventType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;click&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;pgn&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;coupon page&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>You can override the <code>acc</code> and <code>aid</code> default values by including those keys in the <code>parameters</code> dictionary when you create an event.
<strong>Note:</strong> <code>acc</code> and <code>aid</code> <strong>MUST</strong> be integers.</p>
</blockquote>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">RAnalyticsRATTracker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">event</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">eventType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;click&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;acc&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;aid&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">456</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="standard-events">Standard events<a href="#standard-events" class="hash-link" aria-label="Direct link to Standard events" title="Direct link to Standard events">​</a></h3>
<p>The SDK will automatically send events to the Rakuten Analytics Tracker for certain actions. The event type parameter for all of these events are prefixed with <code>_rem_</code>. We also provide named constants for all of those.</p>
<table><thead><tr><th>Event name</th><th>Description</th></tr></thead><tbody><tr><td><code>_rem_init_launch</code></td><td>Application is launched for the first time ever.</td></tr><tr><td><code>_rem_launch</code></td><td>Application is launched.</td></tr><tr><td><code>_rem_end_session</code></td><td>Application goes into background.</td></tr><tr><td><code>_rem_update</code></td><td>Application is launched and its version number does not match the version number of the previous launch.</td></tr><tr><td><code>_rem_login</code></td><td>User logged in successfully.</td></tr><tr><td><code>_rem_logout</code></td><td>User logged out.</td></tr><tr><td><code>_rem_install</code></td><td>Application version is launched for the first time.</td></tr><tr><td><code>_rem_visit</code></td><td>A new page is shown. Application developers can also emit this event manually if they wish so, for instance to track pages that are not view controllers (e.g. a table cell). In that case, they should set the event&#x27;s parameter <code>page_id</code> to a string that uniquely identifies the visit they want to track.</td></tr><tr><td><code>_rem_applink</code></td><td>The application has been opened from a deeplink.</td></tr><tr><td><code>_rem_push_received</code></td><td>A push notification has been received while the app was in background or in foreground.</td></tr><tr><td><code>_rem_push_notify</code></td><td>A push notification has been opened while the app was active, or the app was opened from a push notification. A value that uniquely identifies the push notification is provided in the <code>tracking_id</code> parameter. See its definition below.</td></tr><tr><td><code>_rem_push_auto_register</code></td><td>A pnp auto registration occured.</td></tr><tr><td><code>_rem_push_auto_unregister</code></td><td>A pnp auto unregistration occured.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="requirements-1">Requirements<a href="#requirements-1" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h4>
<p>The below table shows the required components of each standard event which is tracked automatically by the <strong>analytics</strong> module.</p>
<table><thead><tr><th>Event name</th><th>Required components</th></tr></thead><tbody><tr><td><code>_rem_login</code></td><td><strong>authentication</strong> module (3.10.1 or later).</td></tr><tr><td><code>_rem_logout</code></td><td><strong>authentication</strong> module (3.10.1 or later).</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="automatically-generated-state-attributes">Automatically Generated State Attributes<a href="#automatically-generated-state-attributes" class="hash-link" aria-label="Direct link to Automatically Generated State Attributes" title="Direct link to Automatically Generated State Attributes">​</a></h4>
<p>The SDK will automatically generate certain attributes about the state of the device, and pass them to every registered tracker when asked to process an event.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracking-events-in-ios-extensions">Tracking events in iOS Extensions<a href="#tracking-events-in-ios-extensions" class="hash-link" aria-label="Direct link to Tracking events in iOS Extensions" title="Direct link to Tracking events in iOS Extensions">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="warning">Warning<a href="#warning" class="hash-link" aria-label="Direct link to Warning" title="Direct link to Warning">​</a></h3>
<p>Don&#x27;t directly call the AnalyticsManager singleton to track events in your iOS Extensions as you will get:</p>
<ul>
<li>missing parameters such as member identifier</li>
<li>incorrect endpoint URL</li>
</ul>
<p>Use the iOS Extension Event Tracking feature instead.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-the-ios-extension-event-tracking-feature">How to use the iOS Extension Event Tracking feature<a href="#how-to-use-the-ios-extension-event-tracking-feature" class="hash-link" aria-label="Direct link to How to use the iOS Extension Event Tracking feature" title="Direct link to How to use the iOS Extension Event Tracking feature">​</a></h4>
<p>To enable iOS Extension Event Tracking set the following property in your <strong>main app</strong>:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">AnalyticsManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enableExtensionEventTracking </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then you can track events in your iOS extensions using the following function:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">AnalyticsEventPoster</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;myEventName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;key1&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;value1&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracking-events-in-uikits-uiviewcontroller">Tracking events in <code>UIKit</code>&#x27;s <code>UIViewController</code><a href="#tracking-events-in-uikits-uiviewcontroller" class="hash-link" aria-label="Direct link to tracking-events-in-uikits-uiviewcontroller" title="Direct link to tracking-events-in-uikits-uiviewcontroller">​</a></h3>
<p>Page visit events (etype = <code>pv</code>) are automatically tracked for <code>UIViewController</code> instances.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="uiviewcontroller-restrictions"><code>UIViewController</code> restrictions<a href="#uiviewcontroller-restrictions" class="hash-link" aria-label="Direct link to uiviewcontroller-restrictions" title="Direct link to uiviewcontroller-restrictions">​</a></h4>
<p>Page visit events are not tracked for these <code>UIViewController</code> subclasses:</p>
<ul>
<li><code>UINavigationController</code></li>
<li><code>UISplitViewController</code></li>
<li><code>UIPageViewController</code></li>
<li><code>UITabBarController</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="uiview-retrictions"><code>UIView</code> retrictions<a href="#uiview-retrictions" class="hash-link" aria-label="Direct link to uiview-retrictions" title="Direct link to uiview-retrictions">​</a></h4>
<p>Page visit events are not tracked when the <code>UIViewController</code>&#x27;s view type is:</p>
<ul>
<li><code>UIAlertView</code></li>
<li><code>UIActionSheet</code></li>
<li><code>UIAlertController</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-restrictions">Other restrictions<a href="#other-restrictions" class="hash-link" aria-label="Direct link to Other restrictions" title="Direct link to Other restrictions">​</a></h4>
<ul>
<li>Private Apple classes are not tracked as page visit events.</li>
<li><code>UIView</code>&#x27;s window property type must be kind of <code>UIWindow</code> class</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracking-events-in-swiftui-views">Tracking events in SwiftUI views<a href="#tracking-events-in-swiftui-views" class="hash-link" aria-label="Direct link to Tracking events in SwiftUI views" title="Direct link to Tracking events in SwiftUI views">​</a></h3>
<p>To track page visit events (etype = <code>pv</code>) in your SwiftUI apps, call this function in your SwiftUI views body:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public func rviewOnAppear(pageName: String, perform action: (() -&gt; Void)? = nil) -&gt; some View</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This function above calls SwiftUI&#x27;s <code>onAppear</code> internally.
<a href="https://developer.apple.com/documentation/SwiftUI/AnyView/onAppear%28perform:%29" target="_blank" rel="noopener noreferrer">https://developer.apple.com/documentation/SwiftUI/AnyView/onAppear%28perform:%29</a></p>
<p>Example:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">ContentView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">View</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">some</span><span class="token plain"> </span><span class="token class-name">View</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">NavigationView</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">VStack</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">NavigationLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PageView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token class-name">Text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&quot;Page 1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">NavigationLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">destination</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PageView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token class-name">Text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&quot;Page 2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">rviewOnAppear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pageName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;contentView&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ui-interaction">UI Interaction<a href="#ui-interaction" class="hash-link" aria-label="Direct link to UI Interaction" title="Direct link to UI Interaction">​</a></h3>
<p>The following code is an example that can be used to track button clicks. It uses RAT&#x27;s standard <code>click</code> event and passes the page name, clicked element&#x27;s id and goal id in the <code>pgn</code>, <code>target</code> and <code>gol</code> parameters, respectively.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token attribute atrule" style="color:#00a4db">@IBAction</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">buttonTapped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sender</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">UIButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">RAnalyticsRATTracker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">event</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">eventType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;click&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;pgn&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;Main&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         </span><span class="token string-literal string" style="color:#e3116c">&quot;target&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;search_btn&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         </span><span class="token string-literal string" style="color:#e3116c">&quot;gol&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;goal123456&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="track-custom-event">Track custom event<a href="#track-custom-event" class="hash-link" aria-label="Direct link to Track custom event" title="Direct link to Track custom event">​</a></h3>
<p><strong>Note:</strong> These example is using <code>RAnalyticsRATTracker</code> to send RAT specific parameters. If you are using a custom tracker, <code>RAnalyticsEvent</code> should be used instead.</p>
<p>The following is an example of tracking an event with custom parameters. It uses the standard <code>pv</code> RAT event used in the previous examples, and passes some custom <code>custom_param_##</code> parameters in the <code>cp</code> dictionary accepted by RAT for this purpose.</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">RAnalyticsRATTracker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">event</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">eventType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;pv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;pgn&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;Main&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     </span><span class="token string-literal string" style="color:#e3116c">&quot;cp&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;custom_param_1&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;value&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token string-literal string" style="color:#e3116c">&quot;custom_param_2&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token string-literal string" style="color:#e3116c">&quot;custom_param_3&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample-app">Sample app<a href="#sample-app" class="hash-link" aria-label="Direct link to Sample app" title="Direct link to Sample app">​</a></h2>
<ul>
<li>Sample app located by path: <code>Sample/RakutenAnalyticsSample.xcodeproj</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="app-store-submission-procedure">App Store Submission Procedure<a href="#app-store-submission-procedure" class="hash-link" aria-label="Direct link to App Store Submission Procedure" title="Direct link to App Store Submission Procedure">​</a></h2>
<p>Apple requests that you <strong>disclose your usage of the advertising identifier (IDFA)</strong> when releasing your application to the App Store.</p>
<p><img decoding="async" loading="lazy" alt="appstore-idfa.png" src="/rakuten-analytics-public-docs/assets/images/appstore-idfa-53d1f0da9354ab5642b89749ab7dad37.png" width="798" height="518" class="img_ev3q"><em>IDFA usage disclosure</em></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-serve-advertisements-within-the-app">1. Serve advertisements within the app.<a href="#1-serve-advertisements-within-the-app" class="hash-link" aria-label="Direct link to 1. Serve advertisements within the app." title="Direct link to 1. Serve advertisements within the app.">​</a></h4>
<p>Check this box if your app contains advertisements.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-attribute-this-app-installation-to-a-previously-served-advertisement">2. Attribute this app installation to a previously served advertisement<a href="#2-attribute-this-app-installation-to-a-previously-served-advertisement" class="hash-link" aria-label="Direct link to 2. Attribute this app installation to a previously served advertisement" title="Direct link to 2. Attribute this app installation to a previously served advertisement">​</a></h4>
<p>Check this checkbox. The Rakuten SDK uses the IDFA for install attribution.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-attribute-an-action-taken-within-this-app-to-a-previously-served-advertisement">3. Attribute an action taken within this app to a previously served advertisement<a href="#3-attribute-an-action-taken-within-this-app-to-a-previously-served-advertisement" class="hash-link" aria-label="Direct link to 3. Attribute an action taken within this app to a previously served advertisement" title="Direct link to 3. Attribute an action taken within this app to a previously served advertisement">​</a></h4>
<p>Check this checkbox. The Rakuten SDK uses the IDFA for re-engagment ads attribution.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-ios-limited-ad-tracking">5. iOS Limited Ad Tracking<a href="#5-ios-limited-ad-tracking" class="hash-link" aria-label="Direct link to 5. iOS Limited Ad Tracking" title="Direct link to 5. iOS Limited Ad Tracking">​</a></h4>
<p>The Rakuten SDK fully complies with Apple requirement below:</p>
<p>Check the value of this property before performing any advertising tracking. If the value is NO, use the advertising identifier only for the following purposes: frequency capping, conversion events, estimating the number of unique users, security and fraud detection, and debugging.</p>
<p>The Rakuten SDK only uses the IDFA for <code>conversion events, estimating the number of unique users, security and fraud detection</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-build-your-project-without-use_frameworks">How to build your project without use_frameworks!<a href="#how-to-build-your-project-without-use_frameworks" class="hash-link" aria-label="Direct link to How to build your project without use_frameworks!" title="Direct link to How to build your project without use_frameworks!">​</a></h3>
<p>RakutenAnalytics is a Swift framework and contains a custom module map.</p>
<p>If <code>use_frameworks!</code> is not defined in your app&#x27;s Podfile the following Cocoapods error occurs:</p>
<blockquote>
<p><code>Using Swift static libraries with custom module maps is currently not supported.</code></p>
</blockquote>
<p>To solve this problem:</p>
<ol>
<li>Add <code>cocoapods-user-defined-build-types</code> plugin to your Podfile</li>
<li>Declare <code>RAnalytics</code> and its dependencies as <code>static_framework</code> as follows:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">plugin &#x27;cocoapods-user-defined-build-types&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable_user_defined_build_types!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">target &#x27;MyApp&#x27; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pod &#x27;RAnalytics&#x27;, :build_type =&gt; :static_framework</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Note:</strong> The <code>cocoapods-user-defined-build-types</code> plugin is developed by a third party and we cannot guarantee that its support will continue.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rakutenanalytics-swift-package-checkout-tip">RakutenAnalytics Swift Package checkout tip<a href="#rakutenanalytics-swift-package-checkout-tip" class="hash-link" aria-label="Direct link to RakutenAnalytics Swift Package checkout tip" title="Direct link to RakutenAnalytics Swift Package checkout tip">​</a></h3>
<p>If you can&#x27;t checkout the RakutenAnalytics Swift Package in Xcode, please execute these 2 command lines:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/libexec/Plistbuddy -c &quot;Add :IDEPackageSupportUseBuiltinSCM bool 1&quot; ~/Library/Preferences/com.apple.dt.Xcode.plist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xcodebuild -scheme MyScheme -resolvePackageDependencies -usePackageSupportBuiltinSCM</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-run-module">Build and run module<a href="#build-and-run-module" class="hash-link" aria-label="Direct link to Build and run module" title="Direct link to Build and run module">​</a></h3>
<ul>
<li>Clone or fork the <a href="https://github.com/rakutenanalytics/ios-analytics" target="_blank" rel="noopener noreferrer">iOS analytics repository</a></li>
<li><code>cd</code> to the repository folder</li>
<li>Run <code>bundle install --path vendor/bundle</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unit-tests">Unit tests<a href="#unit-tests" class="hash-link" aria-label="Direct link to Unit tests" title="Direct link to Unit tests">​</a></h4>
<ul>
<li>Run <code>bundle exec pod install</code> to install dependencies</li>
<li>Open <code>UnitTestApp.xcworkspace</code> in Xcode then build/run</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="building-app-for-app-store">Building app for App Store<a href="#building-app-for-app-store" class="hash-link" aria-label="Direct link to Building app for App Store" title="Direct link to Building app for App Store">​</a></h4>
<p>Xcode 13 introduced an option (<strong>enabled</strong> by default) to automatically manage app version numbering. Exporting your app with this option enabled breaks the Analytics SDK’s framework version tracking feature.</p>
<p>When exporting for the App Store please disable the option “Manage Version and Build Number” in the Xcode UI. If you prefer to keep this option enabled, be aware that the SDK will not be able to track the versions of your embedded SDKs/frameworks.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handle-rakutenanalytics-and-ranalytics-dependencies-at-the-same-project">Handle RakutenAnalytics and RAnalytics dependencies at the same project<a href="#handle-rakutenanalytics-and-ranalytics-dependencies-at-the-same-project" class="hash-link" aria-label="Direct link to Handle RakutenAnalytics and RAnalytics dependencies at the same project" title="Direct link to Handle RakutenAnalytics and RAnalytics dependencies at the same project">​</a></h3>
<p>The situations where the project contains both <code>RakutenAnalytics</code> and <code>RAnaltyics</code> (as a part of other framework) dependencies can cause isses similar to:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token class-name">RakutenAnalytics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token class-name">SomeFrameworkWithRAnalyticsDependency</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> analyticsManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">AnalyticsManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ERROR: Ambiguous use of &#x27;shared()&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It happens because of dublicated class names between different modules and namespaces. As temporary solution for minor issues we can recommend to specify direct module name for all framework related calls. Example:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token class-name">RakutenAnalytics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token class-name">SomeFrameworkWithRAnalyticsDependency</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> analyticsManager </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">RakutenAnalytics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">AnalyticsManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// No compilation error. We declare and call directly RakutenAnalytics instance.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Unfortunately, this approach does not work for all the cases and really depends on framework usage. For major issues we recommend to wait until framework with <code>RAnalytics</code> dependency will update their dependency to <code>RakutenAnalytics</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-page-views-are-automatically-tracked">How page views are automatically tracked<a href="#how-page-views-are-automatically-tracked" class="hash-link" aria-label="Direct link to How page views are automatically tracked" title="Direct link to How page views are automatically tracked">​</a></h3>
<p>We use method swizzling to automatically trigger a visit event every time a new view controller is presented, unless:</p>
<ul>
<li>The view controller is one of the known &quot;chromes&quot; used to coordinate &quot;content&quot; view controllers, i.e. one of <code>UINavigationController</code>, <code>UISplitViewController</code>, <code>UIPageViewController</code> and <code>UITabBarController</code>.</li>
<li>The view controller is showing a system popup, i.e. <code>UIAlertView</code>, <code>UIActionSheet</code>, <code>UIAlertController</code> or <code>_UIPopoverView</code>.</li>
<li>Either the view controller, its view or the window it&#x27;s attached to is an instance of an Apple-private class, i.e. a class whose name has a <code>_</code> prefix and which comes from a system framework. This prevents many on-screen system accessories from generating bogus page views.</li>
<li>The class of the window the view controller is attached to is a subclass of <code>UIWindow</code> coming from a system framework, i.e. the window is not a normal application window. Certain on-screen system accessories, such as the system keyboard&#x27;s autocompletion word picker, would otherwise trigger events as well.</li>
</ul>
<p>Those visit events are available to all trackers, and the view controller being the event&#x27;s subject can be found in the currentPage property of the event state passed to <code>RAnalyticsTracker#processEvent:state:</code>.</p>
<p>The RAT tracker furthermore ignores view controllers that have no title, no navigation item title, and for which no URL was found on any webview part of their view hierarchy at the time <code>-viewDidLoad</code> was called, unless they have been subclassed by the application or one of the frameworks embedded in the application. This filters out events that would give no information about what page was visited in the application, such as events reporting a page named <code>UIViewController</code>. For view controllers with either a title, navigation item title or URL, the library also sets the <code>cp.title</code> and <code>cp.url</code> fields to the <code>pv</code> event it sends to RAT.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracking-search-results-with-rat">Tracking search results with RAT<a href="#tracking-search-results-with-rat" class="hash-link" aria-label="Direct link to Tracking search results with RAT" title="Direct link to Tracking search results with RAT">​</a></h3>
<p>The code below shows an example of an event you could send to track which results get shown on a search page. It uses the standard <code>pv</code> RAT event used in the previous examples, and a number of standard RAT parameters. The parameters used are:</p>
<table><thead><tr><th>RAT param</th><th>Description</th></tr></thead><tbody><tr><td><code>lang</code></td><td>The language used for the search.</td></tr><tr><td><code>sq</code></td><td>The search terms.</td></tr><tr><td><code>oa</code></td><td><code>a</code> for requesting all search terms (AND), <code>o</code> for requesting one of them (OR).</td></tr><tr><td><code>esq</code></td><td>Terms that should be excluded from the results.</td></tr><tr><td><code>genre</code></td><td>Category for the results.</td></tr><tr><td><code>tag</code></td><td>An array of tags.</td></tr></tbody></table>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">RAnalyticsRATTracker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shared</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">event</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">eventType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;pv&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">parameters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;pgn&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;shop_search&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-literal string" style="color:#e3116c">&quot;pgt&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;search&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-literal string" style="color:#e3116c">&quot;lang&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;English&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-literal string" style="color:#e3116c">&quot;sq&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;search query&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-literal string" style="color:#e3116c">&quot;oa&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-literal string" style="color:#e3116c">&quot;esq&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;excluded query&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-literal string" style="color:#e3116c">&quot;genre&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;category&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-literal string" style="color:#e3116c">&quot;tag&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">&quot;tag 1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">&quot;tag 2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-rat-traffic">Monitoring RAT traffic<a href="#monitoring-rat-traffic" class="hash-link" aria-label="Direct link to Monitoring RAT traffic" title="Direct link to Monitoring RAT traffic">​</a></h3>
<p>You can monitor the tracker network activity by listening to the <code>RAnalyticsWillUploadNotification</code>, <code>RAnalyticsUploadFailureNotification</code> and <code>RAnalyticsUploadSuccessNotification</code> notifications.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verifying-successful-integration">Verifying successful integration<a href="#verifying-successful-integration" class="hash-link" aria-label="Direct link to Verifying successful integration" title="Direct link to Verifying successful integration">​</a></h3>
<p>If the SDK correctly integrated, the events sent to RAT for a logged-in user will contain an <code>easyid</code> field containing the user&#x27;s member identfier. See <a href="/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide#using-kibana-to-verify-successful-integration">here</a> for a guide on how to check the events sent to RAT.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-telephony-values-tracking-ctcarrier-deprecation">Core Telephony values tracking: CTCarrier deprecation<a href="#core-telephony-values-tracking-ctcarrier-deprecation" class="hash-link" aria-label="Direct link to Core Telephony values tracking: CTCarrier deprecation" title="Direct link to Core Telephony values tracking: CTCarrier deprecation">​</a></h3>
<p><strong>Note:</strong> Since SDK version 10.3.0 CTCarrier values will be removed from RakutenAnalyticsSDK. <a href="https://developer.apple.com/documentation/ios-ipados-release-notes/ios-ipados-16_4-release-notes" target="_blank" rel="noopener noreferrer">iOS 16.4 Release Notes</a></p>
<p>We used <a href="https://developer.apple.com/documentation/coretelephony/ctcarrier" target="_blank" rel="noopener noreferrer">CTCarrier</a> API to track values:</p>
<ul>
<li><code>carrierName</code></li>
<li><code>mobileCountryCode</code></li>
<li><code>mobileNetworkCode</code></li>
<li><code>isoCountryCode</code></li>
<li><code>allowsVOIP</code></li>
</ul>
<p>Since iOS 16.4 <code>CTCarrier</code> is a <strong>deprecated</strong> API (<a href="https://developer.apple.com/documentation/ios-ipados-release-notes/ios-ipados-16_4-release-notes" target="_blank" rel="noopener noreferrer">iOS 16.4 Release Notes</a>) and <strong>will be removed in future without any replacement</strong>. As a part of the deprecation process <code>CTCarrier</code> values will always return <code>empty string</code> or <code>65535</code> as <strong>default value</strong>.</p>
<p><code>CTCarrier</code> has been used to provide <code>mcn</code>, <code>mcnd</code>, <code>simopn</code> and <code>simop</code> values. According to the <code>CTCarrier</code> changes, we <strong>stop support</strong> of <code>CTCarrier</code> API and will <strong>remove</strong> it after Apple removes this API from <code>Core Telephony</code> in the future iOS updates.</p>
<p><strong>Example of <code>mcn</code>, <code>mcnd</code>, <code>simopn</code> and <code>simop</code> values before/after CTCarrier deprecation:</strong></p>
<table><thead><tr><th>Key</th><th>Description</th><th>Value before iOS 16.4</th><th>Value after iOS 16.4</th></tr></thead><tbody><tr><td><code>mcn</code></td><td>The name of the primary carrier</td><td><code>Rakuten</code></td><td><code>--</code></td></tr><tr><td><code>mcnd</code></td><td>The name of the secondary carrier</td><td><code>Rakuten</code> or empty string</td><td><code>--</code></td></tr><tr><td><code>simopn</code></td><td>The Service Provider Name</td><td><code>Rakuten</code></td><td><code>--</code></td></tr><tr><td><code>simop</code></td><td>The SIM operator code</td><td><code>44011</code></td><td><code>6553565535</code></td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rakuten-analytics-public-docs/docs/analytics-sdks/ios"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">iOS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rakuten-analytics-public-docs/docs/category/advanced-usage-3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Advanced Usage</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ios-analytics-user-guide" class="table-of-contents__link toc-highlight">iOS Analytics User Guide</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#how-to-install" class="table-of-contents__link toc-highlight">How to install</a><ul><li><a href="#cocoapods" class="table-of-contents__link toc-highlight">CocoaPods</a></li><li><a href="#swift-package-manager" class="table-of-contents__link toc-highlight">Swift Package Manager</a></li><li><a href="#importing-the-module-to-use-it-in-your-app" class="table-of-contents__link toc-highlight">Importing the module to use it in your app</a></li><li><a href="#migration-from-ranalytics-to-rakutenanalytics" class="table-of-contents__link toc-highlight">Migration from RAnalytics to RakutenAnalytics</a></li></ul></li><li><a href="#configuring" class="table-of-contents__link toc-highlight">Configuring</a><ul><li><a href="#credentials" class="table-of-contents__link toc-highlight">Credentials</a></li><li><a href="#build-time-configuration" class="table-of-contents__link toc-highlight">Build-time Configuration</a></li><li><a href="#using-kibana-to-verify-successful-integration" class="table-of-contents__link toc-highlight">Using Kibana to verify successful integration</a></li></ul></li><li><a href="#using-the-sdk" class="table-of-contents__link toc-highlight">Using the SDK</a><ul><li><a href="#handle-login" class="table-of-contents__link toc-highlight">Handle login</a></li><li><a href="#handle-login-failure" class="table-of-contents__link toc-highlight">Handle login failure</a></li><li><a href="#handle-logout" class="table-of-contents__link toc-highlight">Handle logout</a></li><li><a href="#track-standard-event" class="table-of-contents__link toc-highlight">Track standard event</a></li><li><a href="#standard-events" class="table-of-contents__link toc-highlight">Standard events</a></li><li><a href="#tracking-events-in-ios-extensions" class="table-of-contents__link toc-highlight">Tracking events in iOS Extensions</a></li><li><a href="#warning" class="table-of-contents__link toc-highlight">Warning</a></li><li><a href="#tracking-events-in-uikits-uiviewcontroller" class="table-of-contents__link toc-highlight">Tracking events in <code>UIKit</code>&#39;s <code>UIViewController</code></a></li><li><a href="#tracking-events-in-swiftui-views" class="table-of-contents__link toc-highlight">Tracking events in SwiftUI views</a></li><li><a href="#ui-interaction" class="table-of-contents__link toc-highlight">UI Interaction</a></li><li><a href="#track-custom-event" class="table-of-contents__link toc-highlight">Track custom event</a></li></ul></li><li><a href="#sample-app" class="table-of-contents__link toc-highlight">Sample app</a></li><li><a href="#app-store-submission-procedure" class="table-of-contents__link toc-highlight">App Store Submission Procedure</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#how-to-build-your-project-without-use_frameworks" class="table-of-contents__link toc-highlight">How to build your project without use_frameworks!</a></li><li><a href="#rakutenanalytics-swift-package-checkout-tip" class="table-of-contents__link toc-highlight">RakutenAnalytics Swift Package checkout tip</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#build-and-run-module" class="table-of-contents__link toc-highlight">Build and run module</a></li><li><a href="#handle-rakutenanalytics-and-ranalytics-dependencies-at-the-same-project" class="table-of-contents__link toc-highlight">Handle RakutenAnalytics and RAnalytics dependencies at the same project</a></li><li><a href="#how-page-views-are-automatically-tracked" class="table-of-contents__link toc-highlight">How page views are automatically tracked</a></li><li><a href="#tracking-search-results-with-rat" class="table-of-contents__link toc-highlight">Tracking search results with RAT</a></li><li><a href="#monitoring-rat-traffic" class="table-of-contents__link toc-highlight">Monitoring RAT traffic</a></li><li><a href="#verifying-successful-integration" class="table-of-contents__link toc-highlight">Verifying successful integration</a></li><li><a href="#core-telephony-values-tracking-ctcarrier-deprecation" class="table-of-contents__link toc-highlight">Core Telephony values tracking: CTCarrier deprecation</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rakuten-analytics-public-docs/docs/overview">User Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discourse.tech.rakuten-it.com/c/guilds/mobile-dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://confluence.rakuten-it.com/confluence/x/mQ6ia" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rat.intra.rakuten-it.com/analytics/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RAT Analytics Platform<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ghe.rakuten-it.com/rakutenanalytics" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Rakuten Group, Inc.</div></div></div></footer></div>
</body>
</html>