"use strict";(self.webpackChunkanalytics_sdk_extensions=self.webpackChunkanalytics_sdk_extensions||[]).push([[9769],{9033:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"sdks/analytics-sdks/android/advanced-usage/android-analytics-scheduling-strategy","title":"Scheduling Strategy","description":"Configure the RAT Tracker Scheduling Strategy","source":"@site/docs/sdks/analytics-sdks/android/advanced-usage/scheduling-strategy.md","sourceDirName":"sdks/analytics-sdks/android/advanced-usage","slug":"/analytics-sdk/android/android-scheduling-strategy","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdk/android/android-scheduling-strategy","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"id":"android-analytics-scheduling-strategy","slug":"/analytics-sdk/android/android-scheduling-strategy","title":"Scheduling Strategy","added_version":"2.x","updated_version":"11.0.0","changelog":"./android-changelog"},"sidebar":"docSidebar","previous":{"title":"Creating a Custom Tracker","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdk/android/android-custom-tracker"},"next":{"title":"Events to Different RAT Accounts","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdk/android/android-diff-accounts"}}');var i=t(4848),s=t(8453);const r={sidebar_position:2,id:"android-analytics-scheduling-strategy",slug:"/analytics-sdk/android/android-scheduling-strategy",title:"Scheduling Strategy",added_version:"2.x",updated_version:"11.0.0",changelog:"./android-changelog"},c=void 0,d={},o=[{value:"Configure the RAT Tracker Scheduling Strategy",id:"configure-the-rat-tracker-scheduling-strategy",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"configure-the-rat-tracker-scheduling-strategy",children:"Configure the RAT Tracker Scheduling Strategy"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"RATTracker"})," collects events and send them to the RAT backend in batches, the batching interval is  1 second by default. You can configure a different delivery strategy at runtime by extending from the ",(0,i.jsx)(n.code,{children:"DeliveryStrategy"})," class and setting your custom strategy on ",(0,i.jsx)(n.code,{children:"RATTracker"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Additional Info"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"When the app is sent to background, the batching interval is still measured but the interval will be reset if the App is killed. Note, however, after killing the App any saved Analytics events will be sent immediately the next time that the App is launched."}),"\n",(0,i.jsx)(n.li,{children:"Events will still be sent while the App is in the background if the batching interval reaches zero. However, in some cases they may not be sent from the background such as if the Android system clears the memory resources of the App. But same as above, events will be sent immediately the next time that the App is launched."}),"\n",(0,i.jsxs)(n.li,{children:["In our internal tests (",(0,i.jsx)(n.a,{href:"https://jira.rakuten-it.com/jira/browse/SDKCF-1595",children:"here"})," and ",(0,i.jsx)(n.a,{href:"https://jira.rakuten-it.com/jira/browse/SDKCF-1883",children:"here"}),") we noticed no significant impact on battery usage when the batching delay was reduced to 1 sec in our demo app. However you should perform your own developer testing and QA to determine the appropriate batching delay for your app."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// Example 1: Configure batching interval of 10 seconds\nRatTracker.instance().getEventDelivery().setSchedulingStrategy(new SchedulingStrategy() {\n      @Override public int batchingDelay() {\n        return 10; \n      }\n    });\n\n// Example 2: dynamic batching interval, no batching\n// - no batching for the first 10 seconds after app launch\n// - 10 second batching between 10 and 30 seconds after app launch\n// - 60 second batching after 30 seconds after app launch \nclass DynamicSchedulingStrategy extends SchedulingStrategy {\n  final long startTime;\n\n  DynamicDeliveryStrategy() {\n    startTime = SystemClock.elapsedRealtime();\n  }\n\n  @Override\n  public int batchingDelay() {\n    int secondsSinceStart = (SystemClock.elapsedRealtime() - startTime) / 1000;\n    if (secondsSinceStart < 10) {\n      return 0;\n    } else if (secondsSinceStart < 30) {\n      return 10;\n    } else {\n      return 60;\n    }\n  }\n}\n// NOTE: you need to declare the custom application subclass in your AndroidManifest.xml <application> tag\n// see https://developer.android.com/guide/topics/manifest/application-element.html#nm\npublic class MyApp extends Application {\n  @Override\n  public void onCreate() {\n    super.onCreate();\n    RatTracker.instance().getEventDelivery().setSchedulingStrategy(new DynamicSchedulingStrategy());\n  }\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var a=t(6540);const i={},s=a.createContext(i);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);