"use strict";(self.webpackChunkanalytics_sdk_extensions=self.webpackChunkanalytics_sdk_extensions||[]).push([[95],{2733:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"sdks/analytics-sdks/ios/ios-user-guide","title":"User Guide","description":"iOS Analytics User Guide","source":"@site/docs/sdks/analytics-sdks/ios/userguide.md","sourceDirName":"sdks/analytics-sdks/ios","slug":"/analytics-sdk/ios/ios-user-guide","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdk/ios/ios-user-guide","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"id":"ios-user-guide","slug":"/analytics-sdk/ios/ios-user-guide","title":"User Guide"},"sidebar":"docSidebar","previous":{"title":"iOS","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdks/ios"},"next":{"title":"Advanced Usage","permalink":"/rakuten-analytics-public-docs/docs/category/advanced-usage-3"}}');var t=i(4848),r=i(8453);const c={sidebar_position:1,id:"ios-user-guide",slug:"/analytics-sdk/ios/ios-user-guide",title:"User Guide"},a=void 0,d={},l=[{value:"iOS Analytics User Guide",id:"ios-analytics-user-guide",level:2},{value:"Requirements",id:"requirements",level:2},{value:"How to install",id:"how-to-install",level:2},{value:"CocoaPods",id:"cocoapods",level:3},{value:"Swift Package Manager",id:"swift-package-manager",level:3},{value:"Importing the module to use it in your app",id:"importing-the-module-to-use-it-in-your-app",level:3},{value:"Swift",id:"swift",level:4},{value:"Objective-C",id:"objective-c",level:4},{value:"Migration from RAnalytics to RakutenAnalytics",id:"migration-from-ranalytics-to-rakutenanalytics",level:3},{value:"CocoaPods",id:"cocoapods-1",level:4},{value:"Swift Package Manager",id:"swift-package-manager-1",level:4},{value:"Module imports",id:"module-imports",level:4},{value:"Configuring",id:"configuring",level:2},{value:"Credentials",id:"credentials",level:3},{value:"Build-time Configuration",id:"build-time-configuration",level:3},{value:"Using Kibana to verify successful integration",id:"using-kibana-to-verify-successful-integration",level:3},{value:"Using the SDK",id:"using-the-sdk",level:2},{value:"Handle login",id:"handle-login",level:3},{value:"Handle login failure",id:"handle-login-failure",level:3},{value:"Handle logout",id:"handle-logout",level:3},{value:"Track standard event",id:"track-standard-event",level:3},{value:"Tracking generic events",id:"tracking-generic-events",level:4},{value:"Tracking RAT-specific events",id:"tracking-rat-specific-events",level:4},{value:"Standard events",id:"standard-events",level:3},{value:"Requirements",id:"requirements-1",level:4},{value:"Automatically Generated State Attributes",id:"automatically-generated-state-attributes",level:4},{value:"Tracking events in iOS Extensions",id:"tracking-events-in-ios-extensions",level:3},{value:"Warning",id:"warning",level:3},{value:"How to use the iOS Extension Event Tracking feature",id:"how-to-use-the-ios-extension-event-tracking-feature",level:4},{value:"Tracking events in <code>UIKit</code>&#39;s <code>UIViewController</code>",id:"tracking-events-in-uikits-uiviewcontroller",level:3},{value:"<code>UIViewController</code> restrictions",id:"uiviewcontroller-restrictions",level:4},{value:"<code>UIView</code> retrictions",id:"uiview-retrictions",level:4},{value:"Other restrictions",id:"other-restrictions",level:4},{value:"Tracking events in SwiftUI views",id:"tracking-events-in-swiftui-views",level:3},{value:"UI Interaction",id:"ui-interaction",level:3},{value:"Track custom event",id:"track-custom-event",level:3},{value:"Sample app",id:"sample-app",level:2},{value:"App Store Submission Procedure",id:"app-store-submission-procedure",level:2},{value:"1. Serve advertisements within the app.",id:"1-serve-advertisements-within-the-app",level:4},{value:"2. Attribute this app installation to a previously served advertisement",id:"2-attribute-this-app-installation-to-a-previously-served-advertisement",level:4},{value:"3. Attribute an action taken within this app to a previously served advertisement",id:"3-attribute-an-action-taken-within-this-app-to-a-previously-served-advertisement",level:4},{value:"5. iOS Limited Ad Tracking",id:"5-ios-limited-ad-tracking",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"How to build your project without use_frameworks!",id:"how-to-build-your-project-without-use_frameworks",level:3},{value:"RakutenAnalytics Swift Package checkout tip",id:"rakutenanalytics-swift-package-checkout-tip",level:3},{value:"FAQ",id:"faq",level:2},{value:"Build and run module",id:"build-and-run-module",level:3},{value:"Unit tests",id:"unit-tests",level:4},{value:"Building app for App Store",id:"building-app-for-app-store",level:4},{value:"Handle RakutenAnalytics and RAnalytics dependencies at the same project",id:"handle-rakutenanalytics-and-ranalytics-dependencies-at-the-same-project",level:3},{value:"How page views are automatically tracked",id:"how-page-views-are-automatically-tracked",level:3},{value:"Tracking search results with RAT",id:"tracking-search-results-with-rat",level:3},{value:"Monitoring RAT traffic",id:"monitoring-rat-traffic",level:3},{value:"Verifying successful integration",id:"verifying-successful-integration",level:3},{value:"Core Telephony values tracking: CTCarrier deprecation",id:"core-telephony-values-tracking-ctcarrier-deprecation",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"ios-analytics-user-guide",children:"iOS Analytics User Guide"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"analytics"})," module provides APIs for tracking events and automatically sends a subset of lifecycle events to the Rakuten Analytics Tracker (RAT) service."]}),"\n",(0,t.jsxs)(n.p,{children:["For more detailed information, please refer to the ",(0,t.jsx)(n.a,{href:"../../category/advanced-usage-1",children:"Advanced Usage"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsx)(n.p,{children:"This module supports iOS 12.0 and above. It has been tested with iOS 12.5 and above. Our minimum supported version is updated annually based on the OS version usage."}),"\n",(0,t.jsx)(n.p,{children:"Xcode >= 14.1 is supported.\nSwift >= 5.7.1 is supported."}),"\n",(0,t.jsx)(n.p,{children:"Note: The SDK may build on earlier Xcode versions but it is not officially supported or tested."}),"\n",(0,t.jsx)(n.h2,{id:"how-to-install",children:"How to install"}),"\n",(0,t.jsx)(n.h3,{id:"cocoapods",children:"CocoaPods"}),"\n",(0,t.jsxs)(n.p,{children:["To use the module in its default configuration your ",(0,t.jsx)(n.code,{children:"Podfile"})," should contain:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"pod 'RakutenAnalytics'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"pod install"})," to install the module and its dependencies."]}),"\n",(0,t.jsx)(n.h3,{id:"swift-package-manager",children:"Swift Package Manager"}),"\n",(0,t.jsx)(n.p,{children:"Open your project settings in Xcode and add a new package in 'Swift Packages' tab:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Repository URL: ",(0,t.jsx)(n.code,{children:"https://github.com/rakutenanalytics/ios-rakutenanalytics.git"})]}),"\n",(0,t.jsx)(n.li,{children:'Version settings: 10.5.0 "Up to Next Major"'}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Choose ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"})," product for your target. If you want to link other targets (Notification Service Extension, Notification Content Extension, etc), go to Build Phases of that target, then in Link Binary With Libraries click + button and add ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"importing-the-module-to-use-it-in-your-app",children:"Importing the module to use it in your app"}),"\n",(0,t.jsx)(n.h4,{id:"swift",children:"Swift"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import RakutenAnalytics\n"})}),"\n",(0,t.jsx)(n.h4,{id:"objective-c",children:"Objective-C"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"@import RakutenAnalytics;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"migration-from-ranalytics-to-rakutenanalytics",children:"Migration from RAnalytics to RakutenAnalytics"}),"\n",(0,t.jsxs)(n.p,{children:["At the moment there are no major API changes and diffrences between ",(0,t.jsx)(n.code,{children:"RAnalytics"})," and ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"}),". The migration process relates only to reinstalling dependencies and updating imports."]}),"\n",(0,t.jsx)(n.h4,{id:"cocoapods-1",children:"CocoaPods"}),"\n",(0,t.jsxs)(n.p,{children:["To migrate from ",(0,t.jsx)(n.code,{children:"RAnalytics"})," to ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"})," using CocoaPods, please, change ",(0,t.jsx)(n.code,{children:"Podfile"})," the dependency from:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"pod 'RAnalytics'\n"})}),"\n",(0,t.jsx)(n.p,{children:"to:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"pod 'RakutenAnalytics'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["And run ",(0,t.jsx)(n.code,{children:"pod install"})," command to install dependency."]}),"\n",(0,t.jsx)(n.h4,{id:"swift-package-manager-1",children:"Swift Package Manager"}),"\n",(0,t.jsxs)(n.p,{children:["To migrate from ",(0,t.jsx)(n.code,{children:"RAnalytics"})," to ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"})," using Swift Package Manager, please, open your project settings in Xcode and remove ",(0,t.jsx)(n.code,{children:"RAnalytics"})," dependency from Xcode Project. After that, please use this package url:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"https://github.com/rakutenanalytics/ios-rakutenanalytics.git"})}),"\n",(0,t.jsx)(n.p,{children:"instead of:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"ssh://git@gitpub.rakuten-it.com:7999/eco/core-ios-analytics.git"})}),"\n",(0,t.jsxs)(n.p,{children:["To install ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"})," package dependency."]}),"\n",(0,t.jsx)(n.h4,{id:"module-imports",children:"Module imports"}),"\n",(0,t.jsxs)(n.p,{children:["After installing ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"})," instead of ",(0,t.jsx)(n.code,{children:"RAnalytics"})," dependency, please, update module imports in the project from:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import RAnalytics\n"})}),"\n",(0,t.jsx)(n.p,{children:"to:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import RakutenAnalytics\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuring",children:"Configuring"}),"\n",(0,t.jsx)(n.h3,{id:"credentials",children:"Credentials"}),"\n",(0,t.jsx)(n.p,{children:"You must have a RAT account ID and application ID to track events using the Rakuten Analytics Tracker."}),"\n",(0,t.jsx)(n.h3,{id:"build-time-configuration",children:"Build-time Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Applications ",(0,t.jsx)(n.strong,{children:"MUST"})," configure ",(0,t.jsx)(n.code,{children:"RATAccountIdentifier"})," in their ",(0,t.jsx)(n.code,{children:"Info.plist"})," as follows:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Value"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATAccountIdentifier"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"YOUR_RAT_ACCOUNT_ID"})," (Number type)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATAppIdentifier"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"YOUR_RAT_APPLICATION_ID"})," (Number type)"]})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"RATAppIdentifier"})," is an optional key. If not specified, it's default value is set to ",(0,t.jsx)(n.code,{children:"1"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Otherwise:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["RakutenAnalytics SDK ",(0,t.jsx)(n.strong,{children:"THROWS AN EXCEPTION"})," in ",(0,t.jsx)(n.strong,{children:"DEBUG MODE"})," when ",(0,t.jsx)(n.code,{children:"RATAccountIdentifier"})," key is missing in the app's ",(0,t.jsx)(n.code,{children:"Info.plist"})]}),"\n",(0,t.jsxs)(n.li,{children:["RakutenAnalytics SDK tracking is ",(0,t.jsx)(n.strong,{children:"DISABLED"})," in ",(0,t.jsx)(n.strong,{children:"RELEASE MODE"})," when ",(0,t.jsx)(n.code,{children:"RATAccountIdentifier"})," key is missing in the app's ",(0,t.jsx)(n.code,{children:"Info.plist"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"using-kibana-to-verify-successful-integration",children:"Using Kibana to verify successful integration"}),"\n",(0,t.jsx)(n.p,{children:"Kibana STG and PROD sites can be used to check events sent by your app."}),"\n",(0,t.jsxs)(n.p,{children:["To find all analytics data for your app, you can search for your Application Identifier ",(0,t.jsx)(n.code,{children:"aid:<your app id>"})," or ",(0,t.jsx)(n.code,{children:"app_name:<your bundle id>"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["To find data for a certain event type, such as one of the ",(0,t.jsx)(n.a,{href:"./ios-user-guide#standard-events",children:"standard events"}),", you can add the ",(0,t.jsx)(n.code,{children:"etype"})," to your search query, for example ",(0,t.jsx)(n.code,{children:"aid:999 AND etype:_rem_launch"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"using-the-sdk",children:"Using the SDK"}),"\n",(0,t.jsx)(n.h3,{id:"handle-login",children:"Handle login"}),"\n",(0,t.jsxs)(n.p,{children:["The member identifier needs to be set and unset manually in order to track login and logout events with the correct member identifier. In most cases, the value you set as member identifier should be the member's identifier. The member identifier can be extracted from the IDSDK ID token or passed as ",(0,t.jsx)(n.code,{children:"String"})," value."]}),"\n",(0,t.jsxs)(n.p,{children:["You should notify the RakutenAnalytics SDK of the user's member identifier using ",(0,t.jsx)(n.code,{children:"setMemberIdentifier"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"    AnalyticsManager.shared().setMemberIdentifier(%member_identifier%)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note: By setting the member identifier, ",(0,t.jsx)(n.code,{children:"_rem_login"})," is automatically tracked."]}),"\n",(0,t.jsx)(n.h3,{id:"handle-login-failure",children:"Handle login failure"}),"\n",(0,t.jsxs)(n.p,{children:["If user login fails, notify the RakutenAnalytics SDK using ",(0,t.jsx)(n.code,{children:"setMemberError"})," as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"    AnalyticsManager.shared().setMemberError(error)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note: By setting a member error, ",(0,t.jsx)(n.code,{children:"_rem_login_failure"})," is automatically tracked."]}),"\n",(0,t.jsx)(n.h3,{id:"handle-logout",children:"Handle logout"}),"\n",(0,t.jsxs)(n.p,{children:["When a user logs out, notify the RakutenAnalytics SDK using ",(0,t.jsx)(n.code,{children:"removeMemberIdentifier"})," as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"    AnalyticsManager.shared().removeMemberIdentifier()\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note: By removing the member identifier, ",(0,t.jsx)(n.code,{children:"_rem_logout"})," is automatically tracked."]}),"\n",(0,t.jsx)(n.h3,{id:"track-standard-event",children:"Track standard event"}),"\n",(0,t.jsxs)(n.p,{children:["Events are created with ",(0,t.jsx)(n.code,{children:"RAnalyticsEvent#initWithName:parameters:"})," and spooled by calling their track method."]}),"\n",(0,t.jsx)(n.h4,{id:"tracking-generic-events",children:"Tracking generic events"}),"\n",(0,t.jsx)(n.p,{children:"Tracking a generic event relies on a tracker capable of processing the event currently being registered."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'AnalyticsManager.Event(name: "my.event", parameters: ["foo": "bar"]).track()\n'})}),"\n",(0,t.jsx)(n.h4,{id:"tracking-rat-specific-events",children:"Tracking RAT-specific events"}),"\n",(0,t.jsxs)(n.p,{children:["A concrete tracker, ",(0,t.jsx)(n.code,{children:"RAnalyticsRATTracker"}),", is automatically registered and interacts with the ",(0,t.jsx)(n.strong,{children:"Rakuten Analytics Tracker (RAT)"}),". You can also use ",(0,t.jsx)(n.code,{children:"RAnalyticsRATTracker#eventWithEventType:parameters:"})," for creating events that will only be processed by RAT."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Our SDK automatically tracks a number of RAT parameters for you, so you don't have to include those when creating an event: ",(0,t.jsx)(n.code,{children:"acc"}),", ",(0,t.jsx)(n.code,{children:"aid"}),", ",(0,t.jsx)(n.code,{children:"etype"}),", ",(0,t.jsx)(n.code,{children:"powerstatus"}),", ",(0,t.jsx)(n.code,{children:"mbat"}),", ",(0,t.jsx)(n.code,{children:"dln"}),", ",(0,t.jsx)(n.code,{children:"loc"}),", ",(0,t.jsx)(n.code,{children:"mcn"}),", ",(0,t.jsx)(n.code,{children:"model"}),", ",(0,t.jsx)(n.code,{children:"mnetw"}),", ",(0,t.jsx)(n.code,{children:"mori"}),", ",(0,t.jsx)(n.code,{children:"mos"}),", ",(0,t.jsx)(n.code,{children:"online"}),", ",(0,t.jsx)(n.code,{children:"cka"}),", ",(0,t.jsx)(n.code,{children:"ckp"}),", ",(0,t.jsx)(n.code,{children:"cks"}),", ",(0,t.jsx)(n.code,{children:"ua"}),", ",(0,t.jsx)(n.code,{children:"app_name"}),", ",(0,t.jsx)(n.code,{children:"app_ver"}),", ",(0,t.jsx)(n.code,{children:"res"}),", ",(0,t.jsx)(n.code,{children:"ltm"}),", ",(0,t.jsx)(n.code,{children:"ts1"}),", ",(0,t.jsx)(n.code,{children:"tzo"}),", ",(0,t.jsx)(n.code,{children:"userid"})," and ",(0,t.jsx)(n.code,{children:"ver"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'RAnalyticsRATTracker.shared().event(eventType: "click", parameters:["pgn": "coupon page"]).track()\n'})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["You can override the ",(0,t.jsx)(n.code,{children:"acc"})," and ",(0,t.jsx)(n.code,{children:"aid"})," default values by including those keys in the ",(0,t.jsx)(n.code,{children:"parameters"})," dictionary when you create an event.\n",(0,t.jsx)(n.strong,{children:"Note:"})," ",(0,t.jsx)(n.code,{children:"acc"})," and ",(0,t.jsx)(n.code,{children:"aid"})," ",(0,t.jsx)(n.strong,{children:"MUST"})," be integers."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'RAnalyticsRATTracker.shared().event(eventType: "click", parameters:["acc": 123, "aid": 456]).track()\n'})}),"\n",(0,t.jsx)(n.h3,{id:"standard-events",children:"Standard events"}),"\n",(0,t.jsxs)(n.p,{children:["The SDK will automatically send events to the Rakuten Analytics Tracker for certain actions. The event type parameter for all of these events are prefixed with ",(0,t.jsx)(n.code,{children:"_rem_"}),". We also provide named constants for all of those."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Event name"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_init_launch"})}),(0,t.jsx)(n.td,{children:"Application is launched for the first time ever."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_launch"})}),(0,t.jsx)(n.td,{children:"Application is launched."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_end_session"})}),(0,t.jsx)(n.td,{children:"Application goes into background."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_update"})}),(0,t.jsx)(n.td,{children:"Application is launched and its version number does not match the version number of the previous launch."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_login"})}),(0,t.jsx)(n.td,{children:"User logged in successfully."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_logout"})}),(0,t.jsx)(n.td,{children:"User logged out."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_install"})}),(0,t.jsx)(n.td,{children:"Application version is launched for the first time."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_visit"})}),(0,t.jsxs)(n.td,{children:["A new page is shown. Application developers can also emit this event manually if they wish so, for instance to track pages that are not view controllers (e.g. a table cell). In that case, they should set the event's parameter ",(0,t.jsx)(n.code,{children:"page_id"})," to a string that uniquely identifies the visit they want to track."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_applink"})}),(0,t.jsx)(n.td,{children:"The application has been opened from a deeplink."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_push_received"})}),(0,t.jsx)(n.td,{children:"A push notification has been received while the app was in background or in foreground."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_push_notify"})}),(0,t.jsxs)(n.td,{children:["A push notification has been opened while the app was active, or the app was opened from a push notification. A value that uniquely identifies the push notification is provided in the ",(0,t.jsx)(n.code,{children:"tracking_id"})," parameter. See its definition below."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_push_auto_register"})}),(0,t.jsx)(n.td,{children:"A pnp auto registration occured."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_push_auto_unregister"})}),(0,t.jsx)(n.td,{children:"A pnp auto unregistration occured."})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"requirements-1",children:"Requirements"}),"\n",(0,t.jsxs)(n.p,{children:["The below table shows the required components of each standard event which is tracked automatically by the ",(0,t.jsx)(n.strong,{children:"analytics"})," module."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Event name"}),(0,t.jsx)(n.th,{children:"Required components"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_login"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"authentication"})," module (3.10.1 or later)."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"_rem_logout"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"authentication"})," module (3.10.1 or later)."]})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"automatically-generated-state-attributes",children:"Automatically Generated State Attributes"}),"\n",(0,t.jsx)(n.p,{children:"The SDK will automatically generate certain attributes about the state of the device, and pass them to every registered tracker when asked to process an event."}),"\n",(0,t.jsx)(n.h3,{id:"tracking-events-in-ios-extensions",children:"Tracking events in iOS Extensions"}),"\n",(0,t.jsx)(n.h3,{id:"warning",children:"Warning"}),"\n",(0,t.jsx)(n.p,{children:"Don't directly call the AnalyticsManager singleton to track events in your iOS Extensions as you will get:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"missing parameters such as member identifier"}),"\n",(0,t.jsx)(n.li,{children:"incorrect endpoint URL"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Use the iOS Extension Event Tracking feature instead."}),"\n",(0,t.jsx)(n.h4,{id:"how-to-use-the-ios-extension-event-tracking-feature",children:"How to use the iOS Extension Event Tracking feature"}),"\n",(0,t.jsxs)(n.p,{children:["To enable iOS Extension Event Tracking set the following property in your ",(0,t.jsx)(n.strong,{children:"main app"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"AnalyticsManager.shared().enableExtensionEventTracking = true\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then you can track events in your iOS extensions using the following function:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'AnalyticsEventPoster.post(name: "myEventName", parameters: ["key1": "value1"])\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"tracking-events-in-uikits-uiviewcontroller",children:["Tracking events in ",(0,t.jsx)(n.code,{children:"UIKit"}),"'s ",(0,t.jsx)(n.code,{children:"UIViewController"})]}),"\n",(0,t.jsxs)(n.p,{children:["Page visit events (etype = ",(0,t.jsx)(n.code,{children:"pv"}),") are automatically tracked for ",(0,t.jsx)(n.code,{children:"UIViewController"})," instances."]}),"\n",(0,t.jsxs)(n.h4,{id:"uiviewcontroller-restrictions",children:[(0,t.jsx)(n.code,{children:"UIViewController"})," restrictions"]}),"\n",(0,t.jsxs)(n.p,{children:["Page visit events are not tracked for these ",(0,t.jsx)(n.code,{children:"UIViewController"})," subclasses:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"UINavigationController"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"UISplitViewController"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"UIPageViewController"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"UITabBarController"})}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"uiview-retrictions",children:[(0,t.jsx)(n.code,{children:"UIView"})," retrictions"]}),"\n",(0,t.jsxs)(n.p,{children:["Page visit events are not tracked when the ",(0,t.jsx)(n.code,{children:"UIViewController"}),"'s view type is:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"UIAlertView"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"UIActionSheet"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"UIAlertController"})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"other-restrictions",children:"Other restrictions"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Private Apple classes are not tracked as page visit events."}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"UIView"}),"'s window property type must be kind of ",(0,t.jsx)(n.code,{children:"UIWindow"})," class"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tracking-events-in-swiftui-views",children:"Tracking events in SwiftUI views"}),"\n",(0,t.jsxs)(n.p,{children:["To track page visit events (etype = ",(0,t.jsx)(n.code,{children:"pv"}),") in your SwiftUI apps, call this function in your SwiftUI views body:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"public func rviewOnAppear(pageName: String, perform action: (() -> Void)? = nil) -> some View\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This function above calls SwiftUI's ",(0,t.jsx)(n.code,{children:"onAppear"})," internally.\n",(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/SwiftUI/AnyView/onAppear%28perform:%29",children:"https://developer.apple.com/documentation/SwiftUI/AnyView/onAppear%28perform:%29"})]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'struct ContentView: View {\n    var body: some View {\n        NavigationView {\n            VStack {\n                NavigationLink(destination: PageView()) {\n                    Text("Page 1")\n                }\n                NavigationLink(destination: PageView()) {\n                    Text("Page 2")\n                }\n            }.rviewOnAppear(pageName: "contentView") {\n            }\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ui-interaction",children:"UI Interaction"}),"\n",(0,t.jsxs)(n.p,{children:["The following code is an example that can be used to track button clicks. It uses RAT's standard ",(0,t.jsx)(n.code,{children:"click"})," event and passes the page name, clicked element's id and goal id in the ",(0,t.jsx)(n.code,{children:"pgn"}),", ",(0,t.jsx)(n.code,{children:"target"})," and ",(0,t.jsx)(n.code,{children:"gol"})," parameters, respectively."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'@IBAction func buttonTapped(sender: UIButton) {\n    RAnalyticsRATTracker.shared().event(eventType: "click",\n                             parameters:["pgn": "Main",\n                                         "target": "search_btn",\n                                         "gol": "goal123456"]).track()\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"track-custom-event",children:"Track custom event"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," These example is using ",(0,t.jsx)(n.code,{children:"RAnalyticsRATTracker"})," to send RAT specific parameters. If you are using a custom tracker, ",(0,t.jsx)(n.code,{children:"RAnalyticsEvent"})," should be used instead."]}),"\n",(0,t.jsxs)(n.p,{children:["The following is an example of tracking an event with custom parameters. It uses the standard ",(0,t.jsx)(n.code,{children:"pv"})," RAT event used in the previous examples, and passes some custom ",(0,t.jsx)(n.code,{children:"custom_param_##"})," parameters in the ",(0,t.jsx)(n.code,{children:"cp"})," dictionary accepted by RAT for this purpose."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'RAnalyticsRATTracker.shared().event(eventType: "pv",\n                         parameters:["pgn": "Main",\n                                     "cp": ["custom_param_1": "value",\n                                            "custom_param_2": 10,\n                                            "custom_param_3": true]]).track()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"sample-app",children:"Sample app"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Sample app located by path: ",(0,t.jsx)(n.code,{children:"Sample/RakutenAnalyticsSample.xcodeproj"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"app-store-submission-procedure",children:"App Store Submission Procedure"}),"\n",(0,t.jsxs)(n.p,{children:["Apple requests that you ",(0,t.jsx)(n.strong,{children:"disclose your usage of the advertising identifier (IDFA)"})," when releasing your application to the App Store."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"appstore-idfa.png",src:i(1250).A+"",width:"798",height:"518"}),(0,t.jsx)(n.em,{children:"IDFA usage disclosure"})]}),"\n",(0,t.jsx)(n.h4,{id:"1-serve-advertisements-within-the-app",children:"1. Serve advertisements within the app."}),"\n",(0,t.jsx)(n.p,{children:"Check this box if your app contains advertisements."}),"\n",(0,t.jsx)(n.h4,{id:"2-attribute-this-app-installation-to-a-previously-served-advertisement",children:"2. Attribute this app installation to a previously served advertisement"}),"\n",(0,t.jsx)(n.p,{children:"Check this checkbox. The Rakuten SDK uses the IDFA for install attribution."}),"\n",(0,t.jsx)(n.h4,{id:"3-attribute-an-action-taken-within-this-app-to-a-previously-served-advertisement",children:"3. Attribute an action taken within this app to a previously served advertisement"}),"\n",(0,t.jsx)(n.p,{children:"Check this checkbox. The Rakuten SDK uses the IDFA for re-engagment ads attribution."}),"\n",(0,t.jsx)(n.h4,{id:"5-ios-limited-ad-tracking",children:"5. iOS Limited Ad Tracking"}),"\n",(0,t.jsx)(n.p,{children:"The Rakuten SDK fully complies with Apple requirement below:"}),"\n",(0,t.jsx)(n.p,{children:"Check the value of this property before performing any advertising tracking. If the value is NO, use the advertising identifier only for the following purposes: frequency capping, conversion events, estimating the number of unique users, security and fraud detection, and debugging."}),"\n",(0,t.jsxs)(n.p,{children:["The Rakuten SDK only uses the IDFA for ",(0,t.jsx)(n.code,{children:"conversion events, estimating the number of unique users, security and fraud detection"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"how-to-build-your-project-without-use_frameworks",children:"How to build your project without use_frameworks!"}),"\n",(0,t.jsx)(n.p,{children:"RakutenAnalytics is a Swift framework and contains a custom module map."}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"use_frameworks!"})," is not defined in your app's Podfile the following Cocoapods error occurs:"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"Using Swift static libraries with custom module maps is currently not supported."})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To solve this problem:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"cocoapods-user-defined-build-types"})," plugin to your Podfile"]}),"\n",(0,t.jsxs)(n.li,{children:["Declare ",(0,t.jsx)(n.code,{children:"RAnalytics"})," and its dependencies as ",(0,t.jsx)(n.code,{children:"static_framework"})," as follows:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"plugin 'cocoapods-user-defined-build-types'\nenable_user_defined_build_types!\n\ntarget 'MyApp' do\n  pod 'RAnalytics', :build_type => :static_framework\nend\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," The ",(0,t.jsx)(n.code,{children:"cocoapods-user-defined-build-types"})," plugin is developed by a third party and we cannot guarantee that its support will continue."]}),"\n",(0,t.jsx)(n.h3,{id:"rakutenanalytics-swift-package-checkout-tip",children:"RakutenAnalytics Swift Package checkout tip"}),"\n",(0,t.jsx)(n.p,{children:"If you can't checkout the RakutenAnalytics Swift Package in Xcode, please execute these 2 command lines:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'/usr/libexec/Plistbuddy -c "Add :IDEPackageSupportUseBuiltinSCM bool 1" ~/Library/Preferences/com.apple.dt.Xcode.plist\nxcodebuild -scheme MyScheme -resolvePackageDependencies -usePackageSupportBuiltinSCM\n'})}),"\n",(0,t.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,t.jsx)(n.h3,{id:"build-and-run-module",children:"Build and run module"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Clone or fork the ",(0,t.jsx)(n.a,{href:"https://github.com/rakutenanalytics/ios-analytics",children:"iOS analytics repository"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cd"})," to the repository folder"]}),"\n",(0,t.jsxs)(n.li,{children:["Run ",(0,t.jsx)(n.code,{children:"bundle install --path vendor/bundle"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"unit-tests",children:"Unit tests"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Run ",(0,t.jsx)(n.code,{children:"bundle exec pod install"})," to install dependencies"]}),"\n",(0,t.jsxs)(n.li,{children:["Open ",(0,t.jsx)(n.code,{children:"UnitTestApp.xcworkspace"})," in Xcode then build/run"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"building-app-for-app-store",children:"Building app for App Store"}),"\n",(0,t.jsxs)(n.p,{children:["Xcode 13 introduced an option (",(0,t.jsx)(n.strong,{children:"enabled"})," by default) to automatically manage app version numbering. Exporting your app with this option enabled breaks the Analytics SDK\u2019s framework version tracking feature."]}),"\n",(0,t.jsx)(n.p,{children:"When exporting for the App Store please disable the option \u201cManage Version and Build Number\u201d in the Xcode UI. If you prefer to keep this option enabled, be aware that the SDK will not be able to track the versions of your embedded SDKs/frameworks."}),"\n",(0,t.jsx)(n.h3,{id:"handle-rakutenanalytics-and-ranalytics-dependencies-at-the-same-project",children:"Handle RakutenAnalytics and RAnalytics dependencies at the same project"}),"\n",(0,t.jsxs)(n.p,{children:["The situations where the project contains both ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"})," and ",(0,t.jsx)(n.code,{children:"RAnaltyics"})," (as a part of other framework) dependencies can cause isses similar to:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"import RakutenAnalytics\nimport %SomeFrameworkWithRAnalyticsDependency%  \n\nlet analyticsManager = AnalyticsManager.shared() // ERROR: Ambiguous use of 'shared()'\n"})}),"\n",(0,t.jsx)(n.p,{children:"It happens because of dublicated class names between different modules and namespaces. As temporary solution for minor issues we can recommend to specify direct module name for all framework related calls. Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"import RakutenAnalytics\nimport %SomeFrameworkWithRAnalyticsDependency%  \n\nlet analyticsManager = RakutenAnalytics.AnalyticsManager.shared() // No compilation error. We declare and call directly RakutenAnalytics instance.\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Unfortunately, this approach does not work for all the cases and really depends on framework usage. For major issues we recommend to wait until framework with ",(0,t.jsx)(n.code,{children:"RAnalytics"})," dependency will update their dependency to ",(0,t.jsx)(n.code,{children:"RakutenAnalytics"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"how-page-views-are-automatically-tracked",children:"How page views are automatically tracked"}),"\n",(0,t.jsx)(n.p,{children:"We use method swizzling to automatically trigger a visit event every time a new view controller is presented, unless:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:['The view controller is one of the known "chromes" used to coordinate "content" view controllers, i.e. one of ',(0,t.jsx)(n.code,{children:"UINavigationController"}),", ",(0,t.jsx)(n.code,{children:"UISplitViewController"}),", ",(0,t.jsx)(n.code,{children:"UIPageViewController"})," and ",(0,t.jsx)(n.code,{children:"UITabBarController"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The view controller is showing a system popup, i.e. ",(0,t.jsx)(n.code,{children:"UIAlertView"}),", ",(0,t.jsx)(n.code,{children:"UIActionSheet"}),", ",(0,t.jsx)(n.code,{children:"UIAlertController"})," or ",(0,t.jsx)(n.code,{children:"_UIPopoverView"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Either the view controller, its view or the window it's attached to is an instance of an Apple-private class, i.e. a class whose name has a ",(0,t.jsx)(n.code,{children:"_"})," prefix and which comes from a system framework. This prevents many on-screen system accessories from generating bogus page views."]}),"\n",(0,t.jsxs)(n.li,{children:["The class of the window the view controller is attached to is a subclass of ",(0,t.jsx)(n.code,{children:"UIWindow"})," coming from a system framework, i.e. the window is not a normal application window. Certain on-screen system accessories, such as the system keyboard's autocompletion word picker, would otherwise trigger events as well."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Those visit events are available to all trackers, and the view controller being the event's subject can be found in the currentPage property of the event state passed to ",(0,t.jsx)(n.code,{children:"RAnalyticsTracker#processEvent:state:"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The RAT tracker furthermore ignores view controllers that have no title, no navigation item title, and for which no URL was found on any webview part of their view hierarchy at the time ",(0,t.jsx)(n.code,{children:"-viewDidLoad"})," was called, unless they have been subclassed by the application or one of the frameworks embedded in the application. This filters out events that would give no information about what page was visited in the application, such as events reporting a page named ",(0,t.jsx)(n.code,{children:"UIViewController"}),". For view controllers with either a title, navigation item title or URL, the library also sets the ",(0,t.jsx)(n.code,{children:"cp.title"})," and ",(0,t.jsx)(n.code,{children:"cp.url"})," fields to the ",(0,t.jsx)(n.code,{children:"pv"})," event it sends to RAT."]}),"\n",(0,t.jsx)(n.h3,{id:"tracking-search-results-with-rat",children:"Tracking search results with RAT"}),"\n",(0,t.jsxs)(n.p,{children:["The code below shows an example of an event you could send to track which results get shown on a search page. It uses the standard ",(0,t.jsx)(n.code,{children:"pv"})," RAT event used in the previous examples, and a number of standard RAT parameters. The parameters used are:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"RAT param"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"lang"})}),(0,t.jsx)(n.td,{children:"The language used for the search."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sq"})}),(0,t.jsx)(n.td,{children:"The search terms."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"oa"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"a"})," for requesting all search terms (AND), ",(0,t.jsx)(n.code,{children:"o"})," for requesting one of them (OR)."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"esq"})}),(0,t.jsx)(n.td,{children:"Terms that should be excluded from the results."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"genre"})}),(0,t.jsx)(n.td,{children:"Category for the results."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tag"})}),(0,t.jsx)(n.td,{children:"An array of tags."})]})]})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'RAnalyticsRATTracker.shared().event(eventType: "pv",\nparameters:["pgn": "shop_search",\n"pgt": "search",\n"lang": "English",\n"sq": "search query",\n"oa": "a",\n"esq": "excluded query",\n"genre": "category",\n"tag": ["tag 1", "tag 2"]]).track()\n'})}),"\n",(0,t.jsx)(n.h3,{id:"monitoring-rat-traffic",children:"Monitoring RAT traffic"}),"\n",(0,t.jsxs)(n.p,{children:["You can monitor the tracker network activity by listening to the ",(0,t.jsx)(n.code,{children:"RAnalyticsWillUploadNotification"}),", ",(0,t.jsx)(n.code,{children:"RAnalyticsUploadFailureNotification"})," and ",(0,t.jsx)(n.code,{children:"RAnalyticsUploadSuccessNotification"})," notifications."]}),"\n",(0,t.jsx)(n.h3,{id:"verifying-successful-integration",children:"Verifying successful integration"}),"\n",(0,t.jsxs)(n.p,{children:["If the SDK correctly integrated, the events sent to RAT for a logged-in user will contain an ",(0,t.jsx)(n.code,{children:"easyid"})," field containing the user's member identfier. See ",(0,t.jsx)(n.a,{href:"./ios-user-guide#using-kibana-to-verify-successful-integration",children:"here"})," for a guide on how to check the events sent to RAT."]}),"\n",(0,t.jsx)(n.h3,{id:"core-telephony-values-tracking-ctcarrier-deprecation",children:"Core Telephony values tracking: CTCarrier deprecation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Since SDK version 10.3.0 CTCarrier values will be removed from RakutenAnalyticsSDK. ",(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/ios-ipados-release-notes/ios-ipados-16_4-release-notes",children:"iOS 16.4 Release Notes"})]}),"\n",(0,t.jsxs)(n.p,{children:["We used ",(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/coretelephony/ctcarrier",children:"CTCarrier"})," API to track values:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"carrierName"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"mobileCountryCode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"mobileNetworkCode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"isoCountryCode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"allowsVOIP"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Since iOS 16.4 ",(0,t.jsx)(n.code,{children:"CTCarrier"})," is a ",(0,t.jsx)(n.strong,{children:"deprecated"})," API (",(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/ios-ipados-release-notes/ios-ipados-16_4-release-notes",children:"iOS 16.4 Release Notes"}),") and ",(0,t.jsx)(n.strong,{children:"will be removed in future without any replacement"}),". As a part of the deprecation process ",(0,t.jsx)(n.code,{children:"CTCarrier"})," values will always return ",(0,t.jsx)(n.code,{children:"empty string"})," or ",(0,t.jsx)(n.code,{children:"65535"})," as ",(0,t.jsx)(n.strong,{children:"default value"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"CTCarrier"})," has been used to provide ",(0,t.jsx)(n.code,{children:"mcn"}),", ",(0,t.jsx)(n.code,{children:"mcnd"}),", ",(0,t.jsx)(n.code,{children:"simopn"})," and ",(0,t.jsx)(n.code,{children:"simop"})," values. According to the ",(0,t.jsx)(n.code,{children:"CTCarrier"})," changes, we ",(0,t.jsx)(n.strong,{children:"stop support"})," of ",(0,t.jsx)(n.code,{children:"CTCarrier"})," API and will ",(0,t.jsx)(n.strong,{children:"remove"})," it after Apple removes this API from ",(0,t.jsx)(n.code,{children:"Core Telephony"})," in the future iOS updates."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Example of ",(0,t.jsx)(n.code,{children:"mcn"}),", ",(0,t.jsx)(n.code,{children:"mcnd"}),", ",(0,t.jsx)(n.code,{children:"simopn"})," and ",(0,t.jsx)(n.code,{children:"simop"})," values before/after CTCarrier deprecation:"]})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Key"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Value before iOS 16.4"}),(0,t.jsx)(n.th,{children:"Value after iOS 16.4"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"mcn"})}),(0,t.jsx)(n.td,{children:"The name of the primary carrier"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Rakuten"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"mcnd"})}),(0,t.jsx)(n.td,{children:"The name of the secondary carrier"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"Rakuten"})," or empty string"]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"simopn"})}),(0,t.jsx)(n.td,{children:"The Service Provider Name"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Rakuten"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"simop"})}),(0,t.jsx)(n.td,{children:"The SIM operator code"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"44011"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"6553565535"})})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},1250:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/appstore-idfa-53d1f0da9354ab5642b89749ab7dad37.png"},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>a});var s=i(6540);const t={},r=s.createContext(t);function c(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);