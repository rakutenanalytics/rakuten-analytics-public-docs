"use strict";(self.webpackChunkanalytics_sdk_extensions=self.webpackChunkanalytics_sdk_extensions||[]).push([[1147],{9488:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"sdks/analytics-sdks/android/android-analytics-migration","title":"Migration Guide","description":"Migration Guide","source":"@site/docs/sdks/analytics-sdks/android/migration.md","sourceDirName":"sdks/analytics-sdks/android","slug":"/analytics-sdk/android/android-migration","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdk/android/android-migration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"id":"android-analytics-migration","slug":"/analytics-sdk/android/android-migration","title":"Migration Guide"},"sidebar":"docSidebar","previous":{"title":"Frequently Asked Questions","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdk/android/android-faq"},"next":{"title":"Troubleshooting","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdk/android/android-troubleshooting"}}');var t=i(4848),r=i(8453);const s={sidebar_position:4,id:"android-analytics-migration",slug:"/analytics-sdk/android/android-migration",title:"Migration Guide"},d=void 0,c={},l=[{value:"Migration Guide",id:"migration-guide",level:2},{value:"Migration Guide 4.x.x -&gt; 5.0.0",id:"migration-guide-4xx---500",level:2},{value:"Update Identifiers",id:"update-identifiers",level:3},{value:"...<code>build.gradle</code> files",id:"buildgradle-files",level:4},{value:"...<code>import</code> statements in source files",id:"import-statements-in-source-files",level:4},{value:"...<code>meta-data</code> tags in <code>AndroidManifest.xml</code>",id:"meta-data-tags-in-androidmanifestxml",level:4},{value:"Update Usage of public API",id:"update-usage-of-public-api",level:3},{value:"Interfaces",id:"interfaces",level:4},{value:"Classes",id:"classes",level:4},{value:"Enums",id:"enums",level:4},{value:"Changes in <code>AnalyticsManager</code> and <code>RatTracker</code>",id:"changes-in-analyticsmanager-and-rattracker",level:4},{value:"Migration Guide 7.x.x/8.x.x -&gt; 9.x.x",id:"migration-guide-7xx8xx---9xx",level:2},{value:"AnalyticsManager.instance() API Changes",id:"analyticsmanagerinstance-api-changes",level:3},{value:"Example",id:"example",level:4},{value:"Member Identifier APIs Changes",id:"member-identifier-apis-changes",level:3},{value:"Example",id:"example-1",level:4},{value:"Push SDK Events Tracking (moved to Push SDK v9.11.0)",id:"push-sdk-events-tracking-moved-to-push-sdk-v9110",level:3},{value:"Migration Guide 10.x.x -&gt; 11.x.x",id:"migration-guide-10xx---11xx",level:2},{value:"1. Add the <code>LocalBroadcastManager</code> to your app&#39;s build.gradle file.",id:"1-add-the-localbroadcastmanager-to-your-apps-buildgradle-file",level:4},{value:"2. Initialize and register the <code>SDKBroadcastReceiver</code> in the <code>onCreate()</code> method of your <code>Application</code> class.",id:"2-initialize-and-register-the-sdkbroadcastreceiver-in-the-oncreate-method-of-your-application-class",level:4},{value:"Migration Guide 9.x.x -&gt; 10.x.x",id:"migration-guide-9xx---10xx",level:2},{value:"Maven package repository migration",id:"maven-package-repository-migration",level:3},{value:"Issues handling",id:"issues-handling",level:3},{value:"Remove deprecated APIs",id:"remove-deprecated-apis",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,t.jsx)(n.h2,{id:"migration-guide-4xx---500",children:"Migration Guide 4.x.x -> 5.0.0"}),"\n",(0,t.jsxs)(n.p,{children:["There are many changes in this new major version of the analytics sdk. To avoid conflicts with transitive dependencies onto the analytics SDK we decided to change the identifiers and java package our classes live in - so ",(0,t.jsx)(n.strong,{children:"it is safe to run analytics v4 and v5 in parallel in the same application"}),". Follow the steps below to update your app to the newest state."]}),"\n",(0,t.jsx)(n.h3,{id:"update-identifiers",children:"Update Identifiers"}),"\n",(0,t.jsx)(n.p,{children:"The package name of the analytics modules have changed, as well as the maven group id and meta identifiers, so you will have to update identifiers in..."}),"\n",(0,t.jsxs)(n.h4,{id:"buildgradle-files",children:["...",(0,t.jsx)(n.code,{children:"build.gradle"})," files"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",children:"{\n-  compile 'jp.co.rakuten.sdtd:analytics:4.X.Y'\n+  compile 'com.rakuten.tech.mobile.analytics:analytics:5.0.0'\n// implementation instead of compile if you are using the android gradle plugin version 3 or newer\n}\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"import-statements-in-source-files",children:["...",(0,t.jsx)(n.code,{children:"import"})," statements in source files"]}),"\n",(0,t.jsx)(n.p,{children:'Android studio can help you with the "Optimize Imports" action. For example:'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",children:"- import jp.co.rakuten.sdtd.analytics.AnalyticsManager;\n- import jp.co.rakuten.sdtd.analytics.Consumer;\n- import jp.co.rakuten.sdtd.analytics.RATTracker;\n- import jp.co.rakuten.sdtd.analytics.SendDataCallback;\n- import jp.co.rakuten.sdtd.analytics.SendDataErrorCallback;\n+ import com.rakuten.tech.mobile.analytics.AnalyticsManager;\n+ import com.rakuten.tech.mobile.analytics.Consumer;\n+ import com.rakuten.tech.mobile.analytics.RatTracker;\n+ import com.rakuten.tech.mobile.analytics.SchedulingStrategy;\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"meta-data-tags-in-androidmanifestxml",children:["...",(0,t.jsx)(n.code,{children:"meta-data"})," tags in ",(0,t.jsx)(n.code,{children:"AndroidManifest.xml"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",children:'<manifest>\n  <application>\n-   <meta-data  android:name="jp.co.rakuten.sdtd.analytics.RATAccountId"\n+   <meta-data  android:name="com.rakuten.tech.mobile.analytics.RATAccountId"\n                android:value="MY_RAT_ACCOUNT_ID" />\n-   <meta-data  android:name="jp.co.rakuten.sdtd.analytics.RATApplicationId"\n+   <meta-data  android:name="com.rakuten.tech.mobile.analytics.RATApplicationId"\n                android:value="MY_RAT_APPLICATION_ID" />\n    </application>\n</manifest>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"update-usage-of-public-api",children:"Update Usage of public API"}),"\n",(0,t.jsx)(n.p,{children:"The public API of the SDK changed significantly, it is a lot leaner and simpler in version 5. The changes are listed in the tables below. \ud83d\udeab = removed/non-existing, \u2705 = stays the same."}),"\n",(0,t.jsx)(n.h4,{id:"interfaces",children:"Interfaces"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Analytics v4"}),(0,t.jsx)(n.th,{children:"v5"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Consumer"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Tracker"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.Event.Name"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.Event.Parameter"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NetworkStateMonitor.OnBackgroundDataMonitorChangeListener"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SendDataCallback"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"SendDataErrorCallback"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\ud83d\udeab"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/EventDelivery.kt",children:(0,t.jsx)(n.code,{children:"EventDelivery"})})})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"classes",children:"Classes"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Analytics v4"}),(0,t.jsx)(n.th,{children:"v5"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsInitProvider"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.Event"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/Event.kt",children:(0,t.jsx)(n.code,{children:"Event"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.Event.Builder"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.Item"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.Item.Builder"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.State"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/MetaData.kt",children:(0,t.jsx)(n.code,{children:"MetaData"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AppConfig"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DeliveryStrategy"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/SchedulingStrategy.kt",children:(0,t.jsx)(n.code,{children:"SchedulingStrategy"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DeviceUtil"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"GeoLocationInfo"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"GeoLocationManager"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LogUtil"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NetworkStateMonitor"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker"})}),(0,t.jsx)(n.td,{children:(0,t.jsxs)(n.a,{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/RatTracker.kt",children:[(0,t.jsx)(n.code,{children:"RatTracker"})," "]})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"StringUtility"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"enums",children:"Enums"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Analytics v4"}),(0,t.jsx)(n.th,{children:"v5"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.State.LoginMethod"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/MetaData.kt",children:(0,t.jsx)(n.code,{children:"MetaData.LoginMethod"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.State.LogoutMethod"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/MetaData.kt",children:(0,t.jsx)(n.code,{children:"MetaData.LogoutMethod"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\ud83d\udeab"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/RatEnvironment.kt",children:(0,t.jsx)(n.code,{children:"RatEnvironment"})})})]})]})]}),"\n",(0,t.jsxs)(n.h4,{id:"changes-in-analyticsmanager-and-rattracker",children:["Changes in ",(0,t.jsx)(n.code,{children:"AnalyticsManager"})," and ",(0,t.jsx)(n.code,{children:"RatTracker"})]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Analytics v4"}),(0,t.jsx)(n.th,{children:"v5"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#INSTANCE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)("a",{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/AnalyticsManager.kt",children:(0,t.jsx)(n.code,{children:"AnalyticsManager#instance()"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#initialize(Context)"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#initialize(Context, RequestQueue)"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#setCallbacks(SendDataCallback, SendDataErrorCallback)"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#setAccountId(long)"})}),(0,t.jsxs)(n.td,{children:["\ud83d\udeab use ",(0,t.jsx)(n.code,{children:"meta-data"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#setApplicationId()long"})}),(0,t.jsxs)(n.td,{children:["\ud83d\udeab use ",(0,t.jsx)(n.code,{children:"meta-data"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#trackAdvertisingIdentifier(boolean)"})}),(0,t.jsxs)(n.td,{children:["\ud83d\udeab use ",(0,t.jsx)(n.code,{children:"meta-data"})," or ",(0,t.jsx)("a",{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/RatTracker.kt",children:(0,t.jsx)(n.code,{children:"RatTracker#trackAdvertisingIdentifier(boolean)"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#setStaging(boolean)"})}),(0,t.jsxs)(n.td,{children:["\ud83d\udeab use ",(0,t.jsx)(n.code,{children:"meta-data"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#add(Tracker)"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager#enableLocation(boolean)"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#INSTANCE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)("a",{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/RatTracker.kt",children:(0,t.jsx)(n.code,{children:"RatTracker#instance()"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#event(String, Map<String, Object>)"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#getAppId()"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#getGuid()"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#getRpCookie(Consumer<HttpCookie>)"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#initialize(Context, RequestQueue)"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#process(Event, State)"})}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#setApplicationtId(long)"})}),(0,t.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"RATTracker#setDeliveryStrategy(DeliveryStrategy"})}),(0,t.jsxs)(n.td,{children:["use ",(0,t.jsx)("a",{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/RatTracker.kt",children:(0,t.jsx)(n.code,{children:"RatTracker#getEventDelivery()"})})," and ",(0,t.jsx)("a",{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/EventDelivery.kt",children:(0,t.jsx)(n.code,{children:"EventDelivery#setSchedulingStrategy()"})})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\ud83d\udeab"}),(0,t.jsx)(n.td,{children:(0,t.jsx)("a",{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/RatTracker.kt",children:(0,t.jsx)(n.code,{children:"RatTracker#trackAdvertisingIdentifier"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\ud83d\udeab"}),(0,t.jsx)(n.td,{children:(0,t.jsx)("a",{href:"https://github.com/rakutenanalytics/android-analytics/blob/master/analytics/src/main/java/com/rakuten/tech/mobile/analytics/RatTracker.kt",children:(0,t.jsx)(n.code,{children:"RatTracker#getEventDelivery()"})})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"migration-guide-7xx8xx---9xx",children:"Migration Guide 7.x.x/8.x.x -> 9.x.x"}),"\n",(0,t.jsx)(n.h3,{id:"analyticsmanagerinstance-api-changes",children:"AnalyticsManager.instance() API Changes"}),"\n",(0,t.jsxs)(n.p,{children:["Starting v9.0.0, the ",(0,t.jsx)(n.code,{children:"AnalyticsManager.instance()"})," API will now return ",(0,t.jsx)(n.code,{children:"null"})," when the SDK was not initialized instead of throwing ",(0,t.jsx)(n.code,{children:"SdkNotInitializedException"})," exception."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The SDK will re-initialized on next app launch."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["All access to the ",(0,t.jsx)(n.code,{children:"AnalyticsManager.instance()"})," API should have null checking."]}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Before:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:"AnalyticsManager.instance().enableLocation(true)\nAnalyticsManager.instance().getRpCookie(...)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"After:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:"AnalyticsManager.instance()?.enableLocation(true)\nAnalyticsManager.instance()?.getRpCookie(...)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"member-identifier-apis-changes",children:"Member Identifier APIs Changes"}),"\n",(0,t.jsxs)(n.p,{children:["Starting v9.0.0, setting and removing of member identifier is now handled by the ",(0,t.jsx)(n.code,{children:"AnalyticsManager"})," class."]}),"\n",(0,t.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Before:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:"RatIdToken.setMemberIdentifier(memberIdentifier) // Set member identifier and send login event.\n...\nRatIdToken.removeMemberIdentifier() // Remove member identifier and send logout event.\n...\nRatIdToken.setMemberError(error) // Send login failure event.\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"After:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:"AnalyticsManager.instance()?.setMemberIdentifier(memberIdentifier) // Set member identifier and send login event.\n...\nAnalyticsManager.instance()?.removeMemberIdentifier() // Remove member identifier and send logout event.\n...\nAnalyticsManager.instance()?.setMemberError(error) // Send login failure event.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"push-sdk-events-tracking-moved-to-push-sdk-v9110",children:"Push SDK Events Tracking (moved to Push SDK v9.11.0)"}),"\n",(0,t.jsxs)(n.p,{children:["Starting v9.3.0, all the rem push events ",(0,t.jsx)(n.code,{children:"_rem_push_notify"})," ",(0,t.jsx)(n.code,{children:"_rem_push_received"})," ",(0,t.jsx)(n.code,{children:"_rem_push_auto_register"})," ",(0,t.jsx)(n.code,{children:"_rem_push_auto_unregister"})," ",(0,t.jsx)(n.code,{children:"_rem_push_cv"})," tracking mechanism has been moved to Push SDK.\nPlease use Push SDK version >= 9.11.0 to your app in order to track events for push notification:\n",(0,t.jsx)(n.a,{href:"https://github.com/rakuten-mag/android-push.git",children:"https://github.com/rakuten-mag/android-push.git"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)("font",{color:"red",children:"Note:"})," If you want to use RAT SDK v9.3.0 with Push SDK in your app then you must have to upgrade the Push SDK version to 9.11.0, otherwise the push event tracking will not work."]}),"\n",(0,t.jsx)(n.h2,{id:"migration-guide-10xx---11xx",children:"Migration Guide 10.x.x -> 11.x.x"}),"\n",(0,t.jsx)(n.p,{children:"Starting from v11.0.0, the automatic tracking of User SDK login's events listed below has been disabled:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_rem_login"}),"  event."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_rem_logout"})," even`."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"userid"}),"  parameter on all event payloads when the user is logged in."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To enable events tracking in your Application, follow the steps outlined below:"}),"\n",(0,t.jsxs)(n.h4,{id:"1-add-the-localbroadcastmanager-to-your-apps-buildgradle-file",children:["1. Add the ",(0,t.jsx)(n.code,{children:"LocalBroadcastManager"})," to your app's build.gradle file."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:"implementation 'androidx.localbroadcastmanager:localbroadcastmanager:1.1.0'\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"2-initialize-and-register-the-sdkbroadcastreceiver-in-the-oncreate-method-of-your-application-class",children:["2. Initialize and register the ",(0,t.jsx)(n.code,{children:"SDKBroadcastReceiver"})," in the ",(0,t.jsx)(n.code,{children:"onCreate()"})," method of your ",(0,t.jsx)(n.code,{children:"Application"})," class."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:"    import android.app.Application\n    import androidx.localbroadcastmanager.content.LocalBroadcastManager\n    import com.rakuten.tech.mobile.analytics.SdkBroadcastReceiver\n    \n    class MyApplication: Application() {\n        override fun onCreate() {\n            super.onCreate()\n            \n            SdkBroadcastReceiver.getInstance().apply {\n                LocalBroadcastManager.getInstance(this@MyApplication)\n                    .registerReceiver(this, sdkIntentFilter)\n            }\n        }\n    }\n"})}),"\n",(0,t.jsx)(n.p,{children:"For more details, please refer to the following documentation:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/Analytics+SDK%3A+%5BAndroid%5D+Discontinued+automatic+tracking+of+User+SDK+login+events+on+v11.0.0",children:"Discontinued automatic tracking of User SDK login events on v11.0.0"})}),"\n",(0,t.jsxs)(n.li,{children:["Sample app repository: ",(0,t.jsx)(n.a,{href:"https://ghe.rakuten-it.com/rakutenanalytics/android-user-sdk-login-sample",children:"android-user-sdk-login-sample"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"migration-guide-9xx---10xx",children:"Migration Guide 9.x.x -> 10.x.x"}),"\n",(0,t.jsx)(n.h3,{id:"maven-package-repository-migration",children:"Maven package repository migration"}),"\n",(0,t.jsx)(n.p,{children:"Starting from v10.1.0, the repository for the Analytics SDK Maven components has changed. Therefore, you will need to update the repository URL in your build.gradle file as follows:\nUnder the project level, add Maven Central to your repositories:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:"repositories{\n    ...\n    mavenCentral()\n    ...\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:"build.gradle"})," file of your app module, update the project's dependencies to use the new version of the Analytics SDK as follow:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:'dependencies{\n    ...\n    // Make sure to replace \'com.rakuten.tech.mobile.analytics:analytics:...\' with the new group ID, artifact ID:\n    // 1- remove this\n    implementation "com.rakuten.tech.mobile.analytics:analytics:OLD_VERSION"\n    // 2 - add this\n    implementation "io.github.rakutenanalytics:analytics:10.1.0"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"issues-handling",children:"Issues handling"}),"\n",(0,t.jsxs)(n.p,{children:["If you are using Analytics SDK version 10.1.0 or higher, along with other SDKs that have a strict dependency on an Analytics SDK version older than 10.0.1, you may encounter build-time issues due to the migration of the Maven package repository.\nTo resolve this issue, you should exclude the older version of the Analytics SDK ",(0,t.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics"})," from the SDK that implements it, as demonstrated in the example below:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:"implementation \"io.github.rakutenanalytics:analytics:10.1.0\"\nimplementation ('com.rakuten.tech.mobile.mysdk:mysdk:${version}'){\n    exclude group: 'com.rakuten.tech.mobile.analytics', module:'analytics-core'\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Please be aware that there are no significant changes to the public APIs from Analytics version 10.0.x to 10.1.x. Please refer to the ",(0,t.jsx)(n.a,{href:"./android-changelog",children:"Changelog"})," section for details on bug fixes and improvements in the 10.1.x versions."]}),"\n",(0,t.jsx)(n.h2,{id:"remove-deprecated-apis",children:"Remove deprecated APIs"}),"\n",(0,t.jsx)(n.p,{children:"Since 10.0.0, the following deprecated APIs are removed. Please note the new APIs."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.getRpCookie(callback: RpCookieConsumer, fetchError: RpCookieErrorListener?)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.enablePageViewTracking(trackPageViews: Boolean)"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"AnalyticsManager.setShouldTrackEventHandler(handler: ShouldTrackEventHandler?)"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Before:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:"AnalyticsManager.instance()?.getRpCookie(callback: RpCookieConsumer, fetchError: RpCookieErrorListener?)\n\nAnalyticsManager.setShouldTrackEventHandler(handler: ShouldTrackEventHandler?)\n\nAnalyticsManager.instance()?.enablePageViewTracking(trackPageViews: Boolean)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"After:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:"AnalyticsManager.instance()?.getRpCookie(callback: (value: HttpCookie?) -> Unit, fetchError: ((exception: Exception?) -> Unit)?)\n\nAnalyticsManager.setShouldTrackEventHandler(handler: (eventName: String) -> Boolean)\n\n//enablePageViewTracking uses setShouldTrackEventHandler(ShouldTrackEventHandler) instead\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>d});var a=i(6540);const t={},r=a.createContext(t);function s(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);