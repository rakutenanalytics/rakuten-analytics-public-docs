"use strict";(self.webpackChunkanalytics_sdk_extensions=self.webpackChunkanalytics_sdk_extensions||[]).push([[4147],{2796:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"sdks/analytics-sdks/android/android-user-guide","title":"User Guide","description":"Android Analytics User Guide","source":"@site/docs/sdks/analytics-sdks/android/userguide.md","sourceDirName":"sdks/analytics-sdks/android","slug":"/analytics-sdk/android/android-user-guide","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdk/android/android-user-guide","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"id":"android-user-guide","slug":"/analytics-sdk/android/android-user-guide","title":"User Guide"},"sidebar":"docSidebar","previous":{"title":"Android","permalink":"/rakuten-analytics-public-docs/docs/analytics-sdks/android"},"next":{"title":"Advanced Usage","permalink":"/rakuten-analytics-public-docs/docs/category/advanced-usage-2"}}');var r=a(4848),i=a(8453);const s={sidebar_position:1,id:"android-user-guide",slug:"/analytics-sdk/android/android-user-guide",title:"User Guide"},c=void 0,d={},l=[{value:"Android Analytics User Guide",id:"android-analytics-user-guide",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Supported Android Versions",id:"supported-android-versions",level:3},{value:"RAT Credentials",id:"rat-credentials",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"#1 Add dependency to your app&#39;s <code>build.gradle</code>",id:"1-add-dependency-to-your-apps-buildgradle",level:3},{value:"#2 Configure RAT Tracker in your app&#39;s <code>AndroidManifest.xml</code>",id:"2-configure-rat-tracker-in-your-apps-androidmanifestxml",level:3},{value:"#3 Track an event",id:"3-track-an-event",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"How does tracking work?",id:"how-does-tracking-work",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Full Example",id:"full-example",level:4},{value:"Location Tracking",id:"location-tracking",level:4},{value:"<a></a> Mobile Network Automatic Parameters",id:"-mobile-network-automatic-parameters",level:4},{value:"<a></a> <code>mno</code> Parameters",id:"-mno-parameters",level:4},{value:"<a></a> Standard Events",id:"-standard-events",level:2},{value:"Supported SDK versions",id:"supported-sdk-versions",level:3},{value:"Automatically Generated State Attributes",id:"automatically-generated-state-attributes",level:4},{value:"<a></a> RAT Examples",id:"-rat-examples",level:2},{value:"Page Tracking",id:"page-tracking",level:4},{value:"Purchase Data Tracking",id:"purchase-data-tracking",level:4},{value:"Search Results",id:"search-results",level:4},{value:"Custom Events",id:"custom-events",level:4}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"android-analytics-user-guide",children:"Android Analytics User Guide"}),"\n",(0,r.jsxs)(n.p,{children:["The Analytics modules enable applications to record user activity and automatically send tracking events to the ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/RAT+Home",children:"Rakuten Analytics Tracker"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,r.jsx)(n.h3,{id:"supported-android-versions",children:"Supported Android Versions"}),"\n",(0,r.jsx)(n.p,{children:"This SDK supports Android API level 26 (Oreo) and above."}),"\n",(0,r.jsx)(n.h3,{id:"rat-credentials",children:"RAT Credentials"}),"\n",(0,r.jsxs)(n.p,{children:["You must have an account ID and RAT endpoint (PROD or STG) to track events using the ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/RAT+Home",children:"Rakuten Analytics Tracker"}),". Apply for these credentials from this ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=5574865556",children:"form"})," on the RAT site."]}),"\n",(0,r.jsxs)(n.p,{children:["If you have any questions, you can contact us via the ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=3701045924",children:"support page"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,r.jsxs)(n.p,{children:["To enable us to better support you, ensure you do the following ",(0,r.jsx)(n.em,{children:"before"})," creating an ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/pages/viewpage.action?pageId=3701045924",children:"inquiry"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Give the DLM ",(0,r.jsx)(n.code,{children:"dev-rat-data-collection"})," access to your git source repo and include your repo URL on any inquiry ticket"]}),"\n",(0,r.jsxs)(n.li,{children:["Ideally, please also give the members of DLM ",(0,r.jsx)(n.code,{children:"dev-rat-data-collection"})," access to your crash reporting dashboard e.g. Firebase Crashlytics"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"1-add-dependency-to-your-apps-buildgradle",children:["#1 Add dependency to your app's ",(0,r.jsx)(n.code,{children:"build.gradle"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-groovy",children:"repositories {\n    mavenCentral()\n}\n\ndependency {\n  implementation 'io.github.rakutenanalytics:analytics:${version}'\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For using Analytics SDK versions older than v10.1.0, please refer to the ",(0,r.jsx)(n.a,{href:"./android-migration#-maven-package-repository-migration",children:"Maven package repository migration"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"2-configure-rat-tracker-in-your-apps-androidmanifestxml",children:["#2 Configure RAT Tracker in your app's ",(0,r.jsx)(n.code,{children:"AndroidManifest.xml"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest>\n  <application >\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.RATAccountId"\n                android:value="MY_RAT_ACCOUNT_ID" />\n  </application>\n</manifest>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-track-an-event",children:"#3 Track an event"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// Create Map for Parameters\nMap<String, Object> params = new HashMap<>();\nparams.put("foo", "bar");\n\n// Create event track it\nRatTracker.event("click", params).track();\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\ud83c\udf89\nYou've just tracked your first event to RAT! Head over to ",(0,r.jsx)(n.a,{href:"http://grp01.kibana.geap.intra.rakuten-it.com/",children:"RAT's kibana"})," to confirm it. If you use staging use the ",(0,r.jsx)(n.a,{href:"https://rat.intra.rakuten-it.com/stg-kibana/",children:"STG kibana"})," instead.\nSearch for your logs you can filter kibana by account id (",(0,r.jsx)(n.code,{children:"acc"}),"), app id (",(0,r.jsx)(n.code,{children:"aid"}),") or event type (",(0,r.jsx)(n.code,{children:"etype"}),") with a query similar to this ",(0,r.jsx)(n.code,{children:"acc:MY_RAT_ACCOUNT_ID AND aid:MY_RAT_APPLICATION_ID AND etype:_rem_launch"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.h3,{id:"how-does-tracking-work",children:"How does tracking work?"}),"\n",(0,r.jsxs)(n.p,{children:["The analytics SDK centers around 3 core concepts: events, trackers and the ",(0,r.jsx)(n.code,{children:"AnalyticsManager"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Event: Data you want to track."}),"\n",(0,r.jsx)(n.li,{children:"AnalyticsManager: Manages trackers & generates meta data, distributes events to trackers."}),"\n",(0,r.jsxs)(n.li,{children:["Trackers: Consumes events, e.g. ",(0,r.jsx)(n.code,{children:"RatTracker"})," sends events to RAT."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"RATTracker"})," is automatically registered and interacts with the ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/RAT+Home",children:"Rakuten Analytics Tracker (RAT)"}),". You can use ",(0,r.jsx)(n.code,{children:"RatTracker#event(String, Map<String, Object>)"})," to create RAT events that target RAT (other trackers will still be able to receive those events)."]}),"\n",(0,r.jsx)(n.p,{children:"The below snippet shows how these different components work together:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// Create an event\nMap<String, Object> params = new HashMap<>();\nparams.put("foo", "bar");\nEvent event = new Event("click", params);\n\n// track an event\nevent.track(); // -> passed to all trackers, but RatTracker does not send it to RAT\n\n// RAT tracker will only send events created via RatTracker#event(Map<String, Object>)\n// Create & track an event for RAT\nEvent ratEvent = RatTracker.event("click", params);\nratEvent.track(); // -> passed to all trackers and RatTracker sends it to RAT\n\n// Add a new tracker\nTracker loggingTracker = (Event event, MetaData metaData) -> {\n    Log.d("TrackerLog", event.name);\n    return false;\n};\nAnalyticsManager.add(loggingTracker);\n\n// track events again\nevent.track(); ; // -> logged by loggingTracker, but RatTracker does not send it to RAT\nratEvent.track(); ; // -> logged by loggingTracker and RatTracker sends it to RAT\n'})}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.p,{children:"The analytics SDK is configured via manifest meta-data, the configurable values are:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Datatype"}),(0,r.jsx)(n.th,{children:"Manifest Key"}),(0,r.jsx)(n.th,{children:"Optional"}),(0,r.jsx)(n.th,{children:"Default"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RAT account ID"}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.RATAccountId"})}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\ud83d\udeab"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RAT application ID"}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.RATApplicationId"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RAT API Base URL"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.RATEndpoint"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://rat.rakuten.co.jp/"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Track Advertising ID"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.TrackAdvertisingId"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Track Location"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.EnableLocation"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Track ",(0,r.jsx)(n.code,{children:"mno"})," Parameters"]}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.TrackMnoParams"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Enable Debug Log"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.EnableDebugLog"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Disable sending RAT cookies to non-RAT domains"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.SetRatCookiesGlobally"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Enable App to WebView Tracking"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.EnableWebTracking"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Enable the App user-agent setting into a WebView"}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.SetWebViewAppUserAgentEnabled"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["If you want to send data to STG RAT use the staging endpoint as value for ",(0,r.jsx)(n.code,{children:"com.rakuten.tech.mobile.analytics.RATEndpoint"})," as shown in the full example below.\nPlease refer to ",(0,r.jsx)(n.a,{href:"./android-user-guide#rat-credentials",children:"RAT Credentials"})," for retrieving endpoints."]}),"\n",(0,r.jsx)(n.h4,{id:"full-example",children:"Full Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest>\n  <application >\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.RATAccountId"\n                android:value="MY_RAT_ACCOUNT_ID" />\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.RATApplicationId"\n                android:value="MY_RAT_APPLICATION_ID" />\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.RATEndpoint"\n                android:value="MY_RAT_STG_ENDPOINT" />\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.TrackAdvertisingId"\n                android:value="true" />\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.EnableLocation"\n                android:value="true" />\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.EnableDebugLog"\n                android:value="true" />\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.SetRatCookiesGlobally"\n                android:value="false"/>\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.EnableWebTracking"\n                android:value="true" />\n  </application>\n</manifest>\n'})}),"\n",(0,r.jsx)(n.h4,{id:"location-tracking",children:"Location Tracking"}),"\n",(0,r.jsxs)(n.p,{children:["The SDK can track the location of the device by passively receiving location updates when other applications or services request them, or  network (wifi/celltower) locations. The location will be sent to all trackers for every event. To enable location tracking you need to request location permission for the tracking you want (on Android M and newer you need to request these permissions at runtime, see ",(0,r.jsx)(n.a,{href:"http://developer.android.com/training/permissions/requesting.html",children:"the official developer docs"})," for details). For example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest>\n  \x3c!-- track location (optional) --\x3e\n  \x3c!-- fine location will request passively locations --\x3e\n  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />\n  \x3c!-- coarse location will request locations from wifi and cell towers --\x3e\n  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />\n</manifest>\n'})}),"\n",(0,r.jsx)(n.p,{children:"You can disable the location completely from the manifest metadata (e.g. if you want to use location permissions for other features but don't want the SDK registering for updates)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest>\n  <application >\n    <meta-data  android:name="com.rakuten.tech.mobile.analytics.EnableLocation"\n                android:value="false" />\n  </application>\n</manifest>\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Warning:"})," The SDK does not ",(0,r.jsx)(n.em,{children:"actively"})," track the device's location even if the user has granted access to the app and the Location tracking is enabled. Instead, it passively monitors location updates captured by your application.\nTo ",(0,r.jsx)(n.em,{children:"actively"})," track the device's location, please read the ",(0,r.jsx)(n.a,{href:"./android-geo-tracking",children:"Geo Location Tracking"})," section."]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"-mobile-network-automatic-parameters",children:[(0,r.jsx)("a",{name:"mobile-network-parameters"})," Mobile Network Automatic Parameters"]}),"\n",(0,r.jsxs)(n.p,{children:["The SDK adds Mobile Network parameters Mobile Carrier Network ",(0,r.jsx)(n.code,{children:"mcn"}),"  and Mobile Network Type ",(0,r.jsx)(n.code,{children:"mnetw"})," for every event you send whether it is automatic or manual."]}),"\n",(0,r.jsxs)(n.p,{children:["Mobile Carrier Network ",(0,r.jsx)(n.code,{children:"mcnd"}),"  and Mobile Network Type ",(0,r.jsx)(n.code,{children:"mnetwd"})," parameters can also be tracked for Dual SIM functionality on Android N and newer."]}),"\n",(0,r.jsxs)(n.p,{children:["To enable this functionality you need to request READ_PHONE_STATE permission at runtime (see ",(0,r.jsx)(n.a,{href:"http://developer.android.com/training/permissions/requesting.html",children:"the official developer docs"})," for details). For example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest>\n  <uses-permission android:name="android.permission.READ_PHONE_STATE" />\n</manifest>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["For more details see ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/Mobile+SDK+Tracking+Specification+for+RAT#MobileSDKTrackingSpecificationforRAT-AutomaticParameters",children:"Automatic Parameters"})]}),"\n",(0,r.jsxs)(n.h4,{id:"-mno-parameters",children:[(0,r.jsx)("a",{name:"mno-parameters"})," ",(0,r.jsx)(n.code,{children:"mno"})," Parameters"]}),"\n",(0,r.jsxs)(n.p,{children:["The SDK can track detailed mobile network related information such as cell information and signal strength. ",(0,r.jsx)(n.code,{children:"mno"})," network tracking is disabled by default."]}),"\n",(0,r.jsx)(n.p,{children:"To enable this functionality,"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Configure manifest metadata"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest>\n  <application>\n    <meta-data android:name="com.rakuten.tech.mobile.analytics.TrackMnoParams"\n               android:value="true" />\n  </application>\n</manifest>\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["Request Phone and Location permissions at runtime (see ",(0,r.jsx)(n.a,{href:"http://developer.android.com/training/permissions/requesting.html",children:"the official developer docs"})," for details). For example:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest>\n  <uses-permission android:name="android.permission.READ_PHONE_STATE" />\n  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />\n</manifest>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["For more details see ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/Mobile+SDK+Tracking+Specification+for+RAT#MobileSDKTrackingSpecificationforRAT-AutomaticParameters",children:"Automatic Parameters"})]}),"\n",(0,r.jsxs)(n.h2,{id:"-standard-events",children:[(0,r.jsx)("a",{name:"standard-Events"})," Standard Events"]}),"\n",(0,r.jsxs)(n.p,{children:["The SDK will automatically send events to the Rakuten Analytics Tracker for certain actions. The event type parameter for all of these events are prefixed with ",(0,r.jsx)(n.code,{children:"_rem_"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Examples are:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Event Name"}),(0,r.jsx)(n.th,{children:"Event Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_rem_init_launch"})}),(0,r.jsx)(n.td,{children:"Application is launched for the first time ever."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_rem_launch"})}),(0,r.jsx)(n.td,{children:"Application is launched."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_rem_end_session"})}),(0,r.jsx)(n.td,{children:"Application goes into background."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_rem_update"})}),(0,r.jsx)(n.td,{children:"Application is launched and its version number does not match the version number of the previous launch."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_rem_login"})}),(0,r.jsx)(n.td,{children:"User logged in successfully."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_rem_logout"})}),(0,r.jsx)(n.td,{children:"User logged out."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"_rem_install"})}),(0,r.jsx)(n.td,{children:"Application version is launched for the first time."})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["For a full list see the ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/Mobile+SDK+Tracking+Specification+for+RAT#MobileSDKTrackingSpecificationforRAT-AutomaticsEvents",children:"SDK Standard Event Spec"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"supported-sdk-versions",children:"Supported SDK versions"}),"\n",(0,r.jsx)(n.p,{children:"Automatic event tracking of other SDKs modules is supported for the following versions:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"SDK module"}),(0,r.jsx)(n.th,{children:"Support since version"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"User SDK"}),(0,r.jsx)(n.td,{children:"v4.1.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Push SDK"}),(0,r.jsx)(n.td,{children:"v3.1.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Device Information"}),(0,r.jsx)(n.td,{children:"v2.0.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Discover SDK"}),(0,r.jsx)(n.td,{children:"v3.2.0"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Feedback SDK"}),(0,r.jsx)(n.td,{children:"v2.0.3"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Ping SDK"}),(0,r.jsx)(n.td,{children:"v3.0.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Points SDK"}),(0,r.jsx)(n.td,{children:"v2.1.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"InAppMessaging SDK"}),(0,r.jsx)(n.td,{children:"v6.0.0"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"automatically-generated-state-attributes",children:"Automatically Generated State Attributes"}),"\n",(0,r.jsxs)(n.p,{children:["The SDK will generate certain attributes about the state of the app and the device. These attributes are automatically generated and sent to all trackers (including ",(0,r.jsx)(n.code,{children:"RATTracker"}),"). They are pass in the  ",(0,r.jsx)(n.code,{children:"MetaData"})," objects to all calls to `Tracker#process(Event, MetaData), so ",(0,r.jsx)(n.a,{href:"./android-custom-tracker",children:"custom trackers"})," can access them as well."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"State Property"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"userId"})}),(0,r.jsxs)(n.td,{children:["String uniquely identifying the currently logged-in user, if any. Starting v6.7.0, this property can be manually set by the application using ",(0,r.jsx)(n.code,{children:"AnalyticsManager#setUserId"})," API."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"loggedIn"})}),(0,r.jsx)(n.td,{children:"Boolean representing user's current logged in state."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"advertisingId"})}),(0,r.jsx)(n.td,{children:"Google Advertising Identifier."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sessionId"})}),(0,r.jsx)(n.td,{children:"Globally-unique string, updated every time a new session starts."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sessionStart"})}),(0,r.jsx)(n.td,{children:"Date & time of new session is start."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"deviceId"})}),(0,r.jsx)(n.td,{children:"Globally-unique string identifying the current device across all Rakuten applications."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastKnownLocation"})}),(0,r.jsx)(n.td,{children:"Last known location of the device."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentVersion"})}),(0,r.jsx)(n.td,{children:"Current app version."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastVersion"})}),(0,r.jsx)(n.td,{children:"Version of the app when it was last run."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastVersionLaunches"})}),(0,r.jsx)(n.td,{children:"Number of times the last-run version was launched."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"initialLaunch"})}),(0,r.jsx)(n.td,{children:"Date & time of first launch of the application."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastLaunch"})}),(0,r.jsx)(n.td,{children:"Date & time of last launch of the application, prior to the current run."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lastUpdate"})}),(0,r.jsx)(n.td,{children:"Date & time of first launch of the last-run version."})]})]})]}),"\n",(0,r.jsxs)(n.h2,{id:"-rat-examples",children:[(0,r.jsx)("a",{name:"rat-Examples"})," RAT Examples"]}),"\n",(0,r.jsxs)(n.p,{children:["You can verify all RAT analytics events in ",(0,r.jsx)(n.a,{href:"http://grp01.kibana.geap.intra.rakuten-it.com/",children:"Kibana"})," (or ",(0,r.jsx)(n.a,{href:"http://grp01.kibana.geap.intra.rakuten-it.com/stg-kibana/",children:"Kibana STG"}),") in real time. To find all analytics data for your app, search for your Account ID and Application ID by using a search like ",(0,r.jsx)(n.code,{children:"acc:477 and aid:999"}),". To find data for a certain event type, such as one of the ",(0,r.jsx)(n.a,{href:"./android-user-guide#-standard-events",children:"standard events"}),", you can add the ",(0,r.jsx)(n.code,{children:"etype"})," to your search query, for example ",(0,r.jsx)(n.code,{children:"aid:999 AND etype:_rem_launch"}),". Note that data retention in Kibana is quite short."]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(n.p,{children:["RAT has parameters specific to certain use cases, e.g. tracking purchase and shopping cart data or page tracking. These parameters are listed in the ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/RAT+Parameter+Specifications",children:"RAT Parameter Specifications"}),". Below are examples for different usecases that use the RAT specific parameters:"]}),"\n",(0,r.jsx)(n.h4,{id:"page-tracking",children:"Page Tracking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'Map<String, Object> params = new HashMap<>();\nparams.put("pgn", "Main"); // page name\nparams.put("target", "search_btn"); // Element clicked\nparams.put("gol", "Improve marketing effectiveness"); // Goal Id - Goals are specific strategies you\'ll leverage to accomplish your business objectives.\n\nRATTracker.event("click", params).track();\n'})}),"\n",(0,r.jsx)(n.h4,{id:"purchase-data-tracking",children:"Purchase Data Tracking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'String[] arrayOfItemIds = {"shopid/item_1_id", "shopid/item_2_id"};\nString[] arrayOfItemGenres = {"item 1 genre", "item 2 genre"};\nint[] arrayOfItemQuantities = {1, 3};\nfloat[] arrayOfItemPrices = {50.9f, 3.3f};\n\nMap<String, String> variationColor = new HashMap<>();\nvariationColor.put("color", "red");\n\nMap<String, String> variationSize = new HashMap<>();\nvariationSize.put("size", "s");\n\nList<Map> variationsList = new ArrayList<>();\nvariationsList.add(variationColor);\nvariationsList.add(variationSize);\n\ninterface CheckoutStage {\n  int LOGIN = 10;\n  int SHIPPING_DETAILS = 20; \n  int SUMMARY = 30; \n  int PAYMENT = 40;\n  int VERIFICATION = 50;    \n}\n\nMap<String, Object> params = new HashMap<>();\nparams.put("pgn", "checkout");                  // Page Name\nparams.put("pgt", "cart_checkout");             // Page Type\nparams.put("cycode", "JPY");                    // Currency Code - must be three characters\nparams.put("chkout", CheckoutStage.PAYMENT);    // Checkout Stage - must be the value 10, 20, 30, 40, or 50\nparams.put("cntln", "fr_CA");                   // Content Language\nparams.put("itemid", arrayOfItemIds);           // Item IDs in the form "shopid/itemID"\nparams.put("igenre", arrayOfItemGenres);        // Genre for each item\nparams.put("ni", arrayOfItemQuantities);        // Quantity of Items for each item\nparams.put("price", arrayOfItemPrices);         // Price for each item\nparams.put("variation", variationsList);        // Variations of the items\n\nRATTracker.event("pv", params).track();\n'})}),"\n",(0,r.jsx)(n.h4,{id:"search-results",children:"Search Results"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'Map<String, Object> params = new HashMap<>();\nparams.put("pgn", "shop_search");                       // Page Name\nparams.put("pgt", "search");                            // Page Type\nparams.put("lang", "English");                          // Search selected language\nparams.put("sq", "really cool shoes");                  // Search Query\nparams.put("oa", "a");                                  // Search method - "a" for AND - "o" for OR\nparams.put("esq", "lame shoes");                        // Excluded search query\nparams.put("genre", "shoes");                           // Genre or category\nparams.put("tag", new String[] {"tag 1", "tag 2"});     // An array of tags\n\nRATTracker.event("pv", params).track();\n'})}),"\n",(0,r.jsx)(n.h4,{id:"custom-events",children:"Custom Events"}),"\n",(0,r.jsxs)(n.p,{children:["You can send custom events to RAT by picking a new (unused) event type and passing your custom parameters (i.e. parameters not covered in the ",(0,r.jsx)(n.a,{href:"https://confluence.rakuten-it.com/confluence/display/RAT/RAT+Parameter+Specifications",children:"RAT Parameter Specifications"}),") as a flat JSON object as ",(0,r.jsx)(n.code,{children:"cp"})," parameter (cp = custom parameter). Note that ",(0,r.jsx)(n.code,{children:"cp"})," does not support nested JSON objects, if you want to send more structured data you will need to serialize it to String yourself."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'Map<String, Object> params = new HashMap<>();\nparams.put("cp", new JSONObject()       // Custom Parameters\n                        .put("custom_param", "value")\n                        .put("custom_param_2", "value"));\n\nRATTracker.event("custom_event", params).track();\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>c});var t=a(6540);const r={},i=t.createContext(r);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);